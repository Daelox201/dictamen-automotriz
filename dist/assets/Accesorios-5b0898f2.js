import{r as f,M as L,a as F,F as y}from"./index-39e09190.js";import{C as M}from"./ContainerForm-777b056e.js";const E=[{routeSection:"carroceria",nameSection:"CarrocerÃ­a",nameForm:"Accesorios",nextSection:"Molduras",prevSection:"Ruedas",nextRoute:"molduras",prevRoute:"ruedas"}],p=[{name:"",inputs:[{label:"Bases de Espejos Laterales",nameElement:"basesEspejosLaterales"},{label:"Parrillas",nameElement:"parrillas"},{label:"Antenas",nameElement:"antenas"},{label:"Guardas y Protectores",nameElement:"guardasProtectores"},{label:"Insignias y Logotipos",nameElement:"insigniasLogotipos"}]}],I=()=>{const[_,c]=f.useState({select_basesEspejosLaterales:"",select_parrillas:"",select_antenas:"",select_guardasProtectores:"",select_insigniasLogotipos:"",au_basesEspejosLaterales:"0",or_basesEspejosLaterales:"0",rt_basesEspejosLaterales:"0",rc_basesEspejosLaterales:"0",ev_basesEspejosLaterales:"0",observaciones_basesEspejosLaterales:" ",au_parrillas:"0",or_parrillas:"0",rt_parrillas:"0",rc_parrillas:"0",ev_parrillas:"0",observaciones_parrillas:" ",au_antenas:"0",or_antenas:"0",rt_antenas:"0",rc_antenas:"0",ev_antenas:"0",observaciones_antenas:" ",au_guardasProtectores:"0",or_guardasProtectores:"0",rt_guardasProtectores:"0",rc_guardasProtectores:"0",ev_guardasProtectores:"0",observaciones_guardasProtectores:" ",au_insigniasLogotipos:"0",or_insigniasLogotipos:"0",rt_insigniasLogotipos:"0",rc_insigniasLogotipos:"0",ev_insigniasLogotipos:"0",observaciones_insigniasLogotipos:" "}),[h,b]=f.useState({}),{dataDictamen:v}=f.useContext(L);return f.useEffect(()=>{v&&c({...E,...v.carroceria_accesorios})},[]),f.useEffect(()=>{v&&v.carroceria&&v.carroceria.carroceria_accesorios&&c({..._,...v.carroceria.carroceria_accesorios})},[]),F(M,{handleForm:a=>{a.preventDefault();const s=y.getInstance();s.setData(_),s.guardarCarroceriaAccesorios()},data:E,inputs:p,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let r,n;if(a.target.localName!="ion-input"){let o=h[a.target.name],g=a.target.name.split("_")[1];if(!a.target.value){if(r=o.split("_")[1],n=o.split("_")[2],s=p[n].inputs.length,n>0){s=0;for(let u=0;u<=n;u++)s+=p[u].inputs.length}let t={..._};if(t={...t,[o]:t[o]-1||0,[`select_${g}`]:"",[`res_${r}_${n}`]:parseInt((t[o]-1||0)*100/s)},n==0){let u=p.length;for(let d=1;d<u;d++)s+=p[d].inputs.length,t={...t,[`sum_${r}_${d}`]:t[o]||0,[`res_${r}_${d}`]:Math.round((t[o]||0)*100/s)};c(t);return}c(t);return}let i=a.target.value.split("-")[0],m=a.target.value.split("-")[1],e=i.split("_")[1],l=m.split("_")[1];if(n=i.split("_")[2],s=p[n].inputs.length,b({...h,[a.target.name]:i}),_[o]>0){if(r=o.split("_")[1],n>0){s=0;for(let u=0;u<=n;u++)s+=p[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&r==e){t={...t,[`sum_${e}_${n}`]:t[i]+1||1,[m]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/s)},c(t);return}t={...t,[i]:t[i]+1||1,[o]:t[o]-1||0,[m]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/s),[`res_${r}_${n}`]:Math.round((t[o]-1||0)*100/s)},c(t);return}if(n>0){s=0;for(let t=0;t<=n;t++)s+=p[t].inputs.length}let $={..._};if($={...$,[`sum_${e}_${n}`]:$[i]+1||1,[m]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round(($[i]+1||1)*100/s)},n==0){let t=p.length;console.log(s);for(let u=1;u<t;u++)s+=p[u].inputs.length,$={...$,[`sum_${e}_${u}`]:$[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round(($[[`sum_${e}_${u}`]]+1||1)*100/s)};c($);return}c($)}else c({..._,[a.target.name]:a.target.value})},dataForm:_,handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],r=a.target.name.split("_")[a.target.name.split("_").length-2],n=a.target.name.split("_")[a.target.name.split("_").length-3],o=[],g=0,i=p[r].inputs.length;_[`ev_${r}`]?(o.push(..._[`ev_${r}`]),o[s]=a.target.value,c({..._,[`ev_${r}`]:o})):(c({..._,[`ev_${r}`]:[a.target.value]}),o[s]=a.target.value);for(let e=0;e<o.length;e++)o[e]||(o[e]="0");if(o.map(e=>{g+=parseInt(e)||0}),r>0){i=0;for(let e=0;e<=r;e++)i+=p[e].inputs.length}if(_.sum_ev_0&&r==1){console.warn("Exist"),g+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${r}`]:o,[`ev_${n}`]:a.target.value,[`sum_ev_${r}`]:g,[`res_ev_${r}`]:Math.round(g*100/(i*4))},c(e);return}let m={..._};if(m={...m,[`ev_${r}`]:o,[`ev_${n}`]:a.target.value,[`sum_ev_${r}`]:g,[`res_ev_${r}`]:Math.round(g*100/(i*4))},r==0){let e=p.length;for(let l=1;l<e;l++)i+=p[l].inputs.length,console.log(g),m={...m,[`ev_${n}`]:a.target.value,[`sum_ev_${l}`]:g,[`res_ev_${l}`]:Math.round(g*100/(i*4))};c(m);return}c(m)}})};export{I as default};
