import{r as f,M as b,a as D,F as x}from"./index-39e09190.js";import{C as S}from"./ContainerForm-777b056e.js";const C=[{routeSection:"sistemasMotor",nameSection:"Sistemas Alternos de Motor",nameForm:"Sistema de Enfriamento",nextSection:"Sistema de Encendido o Ignicion",prevSection:"Sistema de Emision de Gases",nextRoute:"sistemaEncendidoIgnicion",prevRoute:"sistemaEmisionGases"}],m=[{name:"",inputs:[{label:"Radiador",nameElement:"radiador"},{label:"Tapon de Radiador",nameElement:"taponRadiador"},{label:"Deformidades o Golpes",nameElement:"deformidadesGolpes"},{label:"Mangueras y Ductos",nameElement:"manguerasDuctos"},{label:"Cableados y Conectores",nameElement:"manguerasConectores"},{label:"ConexionesEE",nameElement:"conexionesEE"},{label:"Fugas",nameElement:"fugas"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"}]},{name:"Con Control Electronico",inputs:[{label:"Sensores de Temperatura",nameElement:"sensoresTemp"},{label:"Modulos",nameElement:"modulos"}]}],j=()=>{const[_,c]=f.useState({select_radiador:"",select_taponRadiador:"",select_deformidadesGolpes:"",select_manguerasDuctos:"",select_manguerasConectores:"",select_conexionesEE:"",select_fugas:"",select_sensoresTemp:"",select_sujeciones:"",select_modulos:"",select_bobinasIndependientes:"",select_soportes:"",au_radiador:0,or_radiador:0,rt_radiador:0,rc_radiador:0,ev_radiador:0,observaciones_radiador:"",au_taponRadiador:0,or_taponRadiador:0,rt_taponRadiador:0,rc_taponRadiador:0,ev_taponRadiador:0,observaciones_taponRadiador:"",au_deformidadesGolpes:0,or_deformidadesGolpes:0,rt_deformidadesGolpes:0,rc_deformidadesGolpes:0,ev_deformidadesGolpes:0,observaciones_deformidadesGolpes:"",au_manguerasDuctos:0,or_manguerasDuctos:0,rt_manguerasDuctos:0,rc_manguerasDuctos:0,ev_manguerasDuctos:0,observaciones_manguerasDuctos:"",au_manguerasConectores:0,or_manguerasConectores:0,rt_manguerasConectores:0,rc_manguerasConectores:0,ev_manguerasConectores:0,observaciones_manguerasConectores:"",au_conexionesEE:0,or_conexionesEE:0,rt_conexionesEE:0,rc_conexionesEE:0,ev_conexionesEE:0,observaciones_conexionesEE:"",au_fugas:0,or_fugas:0,rt_fugas:0,rc_fugas:0,ev_fugas:0,observaciones_fugas:"",au_soportes:0,or_soportes:0,rt_soportes:0,rc_soportes:0,ev_soportes:0,observaciones_soportes:"",au_sujeciones:0,or_sujeciones:0,rt_sujeciones:0,rc_sujeciones:0,ev_sujeciones:0,observaciones_sujeciones:"",au_sensoresTemp:0,or_sensoresTemp:0,rt_sensoresTemp:0,rc_sensoresTemp:0,ev_sensoresTemp:0,observaciones_sensoresTemp:0,au_modulos:0,or_modulos:0,rt_modulos:0,rc_modulos:0,ev_modulos:0,observaciones_modulos:0}),[E,h]=f.useState({}),{dataDictamen:v}=f.useContext(b);return f.useEffect(()=>{v&&v.sistemas_motor&&v.sistemas_motor.sistema_enfriamento&&c({..._,...v.sistemas_motor.sistema_enfriamento})},[]),D(S,{data:C,handleForm:a=>{a.preventDefault();const s=x.getInstance();s.setData(_),s.guardarSistemaEnfriamento()},inputs:m,dataForm:_,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let o,n;if(a.target.localName!="ion-input"){let r=E[a.target.name],d=a.target.name.split("_")[1];if(!a.target.value){if(o=r.split("_")[1],n=r.split("_")[2],s=m[n].inputs.length,n>0){s=0;for(let u=0;u<=n;u++)s+=m[u].inputs.length}let t={..._};if(t={...t,[r]:t[r]-1||0,[`select_${d}`]:"",[`res_${o}_${n}`]:parseInt((t[r]-1||0)*100/s)},n==0){let u=m.length;for(let $=1;$<u;$++)s+=m[$].inputs.length,t={...t,[`sum_${o}_${$}`]:t[r]||0,[`res_${o}_${$}`]:Math.round((t[r]||0)*100/s)};c(t);return}c(t);return}let i=a.target.value.split("-")[0],p=a.target.value.split("-")[1],e=i.split("_")[1],l=p.split("_")[1];if(n=i.split("_")[2],s=m[n].inputs.length,h({...E,[a.target.name]:i}),_[r]>0){if(o=r.split("_")[1],n>0){s=0;for(let u=0;u<=n;u++)s+=m[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&o==e){t={...t,[`sum_${e}_${n}`]:t[i]+1||1,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/s)},c(t);return}t={...t,[i]:t[i]+1||1,[r]:t[r]-1||0,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/s),[`res_${o}_${n}`]:Math.round((t[r]-1||0)*100/s)},c(t);return}if(n>0){s=0;for(let t=0;t<=n;t++)s+=m[t].inputs.length}let g={..._};if(g={...g,[`sum_${e}_${n}`]:g[i]+1||1,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((g[i]+1||1)*100/s)},n==0){let t=m.length;console.log(s);for(let u=1;u<t;u++)s+=m[u].inputs.length,g={...g,[`sum_${e}_${u}`]:g[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((g[[`sum_${e}_${u}`]]+1||1)*100/s)};c(g);return}c(g)}else c({..._,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],o=a.target.name.split("_")[a.target.name.split("_").length-2],n=a.target.name.split("_")[a.target.name.split("_").length-3],r=[],d=0,i=m[o].inputs.length;_[`ev_${o}`]?(r.push(..._[`ev_${o}`]),r[s]=a.target.value,c({..._,[`ev_${o}`]:r})):(c({..._,[`ev_${o}`]:[a.target.value]}),r[s]=a.target.value);for(let e=0;e<r.length;e++)r[e]||(r[e]="0");if(r.map(e=>{d+=parseInt(e)||0}),o>0){i=0;for(let e=0;e<=o;e++)i+=m[e].inputs.length}if(_.sum_ev_0&&o==1){console.warn("Exist"),d+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${o}`]:r,[`ev_${n}`]:a.target.value,[`sum_ev_${o}`]:d,[`res_ev_${o}`]:Math.round(d*100/(i*4))},c(e);return}let p={..._};if(p={...p,[`ev_${o}`]:r,[`ev_${n}`]:a.target.value,[`sum_ev_${o}`]:d,[`res_ev_${o}`]:Math.round(d*100/(i*4))},o==0){let e=m.length;for(let l=1;l<e;l++)i+=m[l].inputs.length,console.log(d),p={...p,[`ev_${n}`]:a.target.value,[`sum_ev_${l}`]:d,[`res_ev_${l}`]:Math.round(d*100/(i*4))};c(p);return}c(p)}})};export{j as default};
