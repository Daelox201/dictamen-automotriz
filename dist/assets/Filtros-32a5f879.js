import{r as h,M as b,a as M,F as D}from"./index-39e09190.js";import{C as y}from"./ContainerForm-777b056e.js";const j=[{routeSection:"generalesMotor",nameSection:"Generales Motor",nameForm:"Filtros",nextSection:"Tapas y Depositos",prevSection:"Tapones",nextRoute:"tapasDepositos",prevRoute:"tapones"}],c=[{name:"",inputs:[{label:"Aceite",nameElement:"aceite"},{label:"Aire Habitaculo Pasajeros",nameElement:"aireHabitaculoPasajeros"}]}],I=()=>{const[_,m]=h.useState({select_aceite:"",select_aireHabitaculoPasajeros:"",au_aceite:0,or_aceite:0,rt_aceite:0,rc_aceite:0,ev_aceite:0,observaciones_aceite:"",au_aireHabitaculoPasajeros:0,or_aireHabitaculoPasajeros:0,rt_aireHabitaculoPasajeros:0,rc_aireHabitaculoPasajeros:0,ev_aireHabitaculoPasajeros:0,observaciones_aireHabitaculoPasajeros:""}),[d,F]=h.useState({}),{dataDictamen:f}=h.useContext(b);return h.useEffect(()=>{f&&f.generales_motor&&f.generales_motor.motores_filtros&&m({..._,...f.generales_motor.motores_filtros})},[]),M(y,{data:j,handleForm:a=>{a.preventDefault();const r=D.getInstance();r.setData(_),r.guardarMotorFiltros()},inputs:c,dataForm:_,handleInput:a=>{let r;if(a.target.localName=="ion-select")return;let n,s;if(a.target.localName!="ion-input"){let o=d[a.target.name],$=a.target.name.split("_")[1];if(!a.target.value){if(n=o.split("_")[1],s=o.split("_")[2],r=c[s].inputs.length,s>0){r=0;for(let u=0;u<=s;u++)r+=c[u].inputs.length}let t={..._};if(t={...t,[o]:t[o]-1||0,[`select_${$}`]:"",[`res_${n}_${s}`]:parseInt((t[o]-1||0)*100/r)},s==0){let u=c.length;for(let v=1;v<u;v++)r+=c[v].inputs.length,t={...t,[`sum_${n}_${v}`]:t[o]||0,[`res_${n}_${v}`]:Math.round((t[o]||0)*100/r)};m(t);return}m(t);return}let i=a.target.value.split("-")[0],p=a.target.value.split("-")[1],e=i.split("_")[1],l=p.split("_")[1];if(s=i.split("_")[2],r=c[s].inputs.length,F({...d,[a.target.name]:i}),_[o]>0){if(n=o.split("_")[1],s>0){r=0;for(let u=0;u<=s;u++)r+=c[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&n==e){t={...t,[`sum_${e}_${s}`]:t[i]+1||1,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${s}`]:Math.round((t[i]+1||1)*100/r)},m(t);return}t={...t,[i]:t[i]+1||1,[o]:t[o]-1||0,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${s}`]:Math.round((t[i]+1||1)*100/r),[`res_${n}_${s}`]:Math.round((t[o]-1||0)*100/r)},m(t);return}if(s>0){r=0;for(let t=0;t<=s;t++)r+=c[t].inputs.length}let g={..._};if(g={...g,[`sum_${e}_${s}`]:g[i]+1||1,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${s}`]:Math.round((g[i]+1||1)*100/r)},s==0){let t=c.length;console.log(r);for(let u=1;u<t;u++)r+=c[u].inputs.length,g={...g,[`sum_${e}_${u}`]:g[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((g[[`sum_${e}_${u}`]]+1||1)*100/r)};m(g);return}m(g)}else m({..._,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let r=a.target.name.split("_")[a.target.name.split("_").length-1],n=a.target.name.split("_")[a.target.name.split("_").length-2],s=a.target.name.split("_")[a.target.name.split("_").length-3],o=[],$=0,i=c[n].inputs.length;_[`ev_${n}`]?(o.push(..._[`ev_${n}`]),o[r]=a.target.value,m({..._,[`ev_${n}`]:o})):(m({..._,[`ev_${n}`]:[a.target.value]}),o[r]=a.target.value);for(let e=0;e<o.length;e++)o[e]||(o[e]="0");if(o.map(e=>{$+=parseInt(e)||0}),n>0){i=0;for(let e=0;e<=n;e++)i+=c[e].inputs.length}if(_.sum_ev_0&&n==1){console.warn("Exist"),$+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${n}`]:o,[`ev_${s}`]:a.target.value,[`sum_ev_${n}`]:$,[`res_ev_${n}`]:Math.round($*100/(i*4))},m(e);return}let p={..._};if(p={...p,[`ev_${n}`]:o,[`ev_${s}`]:a.target.value,[`sum_ev_${n}`]:$,[`res_ev_${n}`]:Math.round($*100/(i*4))},n==0){let e=c.length;for(let l=1;l<e;l++)i+=c[l].inputs.length,console.log($),p={...p,[`ev_${s}`]:a.target.value,[`sum_ev_${l}`]:$,[`res_ev_${l}`]:Math.round($*100/(i*4))};m(p);return}m(p)}})};export{I as default};
