import{r as C,M as f,a as E,F as y}from"./index-39e09190.js";import{C as F}from"./ContainerForm-777b056e.js";const b=[{routeSection:"carroceria",nameSection:"CarrocerÃ­a",nameForm:"Cerrajerias y Enclaves",nextSection:"Ruedas",prevSection:"Cristales y Ventanas",nextRoute:"ruedas",prevRoute:"cristalesVentanas"}],i=[{name:"",inputs:[{label:"Chapas Puertas",nameElement:"chapasPuertas"},{label:"Chapas Capo y Cajuela",nameElement:"chapasCapoCajuela"},{label:"Seguros",nameElement:"seguros"},{label:"Enclave Aletillas",nameElement:"enclaveAletillas"},{label:"Enclave Capo y Cajuela",nameElement:"enclaveCapoCajuela"},{label:"Sujeciones",nameElement:"sujeciones"}]}],A=()=>{const[_,p]=C.useState({select_chapasPuertas:"",select_chapasCapoCajuela:"",select_seguros:"",select_enclaveAletillas:"",select_enclaveCapoCajuela:"",select_sujeciones:"",au_chapasPuertas:"0",or_chapasPuertas:"0",rt_chapasPuertas:"0",rc_chapasPuertas:"0",ev_chapasPuertas:"0",observaciones_chapasPuertas:" ",au_chapasCapoCajuela:"0",or_chapasCapoCajuela:"0",rt_chapasCapoCajuela:"0",rc_chapasCapoCajuela:"0",ev_chapasCapoCajuela:"0",observaciones_chapasCapoCajuela:" ",au_seguros:"0",or_seguros:"0",rt_seguros:"0",rc_seguros:"0",ev_seguros:"0",observaciones_seguros:" ",au_enclaveAletillas:"0",or_enclaveAletillas:"0",rt_enclaveAletillas:"0",rc_enclaveAletillas:"0",ev_enclaveAletillas:"0",observaciones_enclaveAletillas:" ",au_enclaveCapoCajuela:"0",or_enclaveCapoCajuela:"0",rt_enclaveCapoCajuela:"0",rc_enclaveCapoCajuela:"0",ev_enclaveCapoCajuela:"0",observaciones_enclaveCapoCajuela:" ",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:" "}),[j,d]=C.useState({}),{dataDictamen:h}=C.useContext(f);return C.useEffect(()=>{h&&h.carroceria&&h.carroceria.carroceria_cerrajerias_enclaves&&p({..._,...h.carroceria.carroceria_cerrajerias_enclaves})},[]),E(F,{handleForm:t=>{t.preventDefault();const r=y.getInstance();r.setData(_),r.guardarCarroceriaCarrajeriasEnclaves()},data:b,inputs:i,handleInput:t=>{let r;if(t.target.localName=="ion-select")return;let s,l;if(t.target.localName!="ion-input"){let n=j[t.target.name],v=t.target.name.split("_")[1];if(!t.target.value){if(s=n.split("_")[1],l=n.split("_")[2],r=i[l].inputs.length,l>0){r=0;for(let c=0;c<=l;c++)r+=i[c].inputs.length}let a={..._};if(a={...a,[n]:a[n]-1||0,[`select_${v}`]:"",[`res_${s}_${l}`]:parseInt((a[n]-1||0)*100/r)},l==0){let c=i.length;for(let g=1;g<c;g++)r+=i[g].inputs.length,a={...a,[`sum_${s}_${g}`]:a[n]||0,[`res_${s}_${g}`]:Math.round((a[n]||0)*100/r)};p(a);return}p(a);return}let u=t.target.value.split("-")[0],m=t.target.value.split("-")[1],e=u.split("_")[1],o=m.split("_")[1];if(l=u.split("_")[2],r=i[l].inputs.length,d({...j,[t.target.name]:u}),_[n]>0){if(s=n.split("_")[1],l>0){r=0;for(let c=0;c<=l;c++)r+=i[c].inputs.length}let a={..._};if(_[`sum_${e}_0`]&&s==e){a={...a,[`sum_${e}_${l}`]:a[u]+1||1,[m]:t.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${l}`]:Math.round((a[u]+1||1)*100/r)},p(a);return}a={...a,[u]:a[u]+1||1,[n]:a[n]-1||0,[m]:t.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${l}`]:Math.round((a[u]+1||1)*100/r),[`res_${s}_${l}`]:Math.round((a[n]-1||0)*100/r)},p(a);return}if(l>0){r=0;for(let a=0;a<=l;a++)r+=i[a].inputs.length}let $={..._};if($={...$,[`sum_${e}_${l}`]:$[u]+1||1,[m]:t.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${l}`]:Math.round(($[u]+1||1)*100/r)},l==0){let a=i.length;console.log(r);for(let c=1;c<a;c++)r+=i[c].inputs.length,$={...$,[`sum_${e}_${c}`]:$[[`sum_${e}_${c}`]]+1||1,[`res_${e}_${c}`]:Math.round(($[[`sum_${e}_${c}`]]+1||1)*100/r)};p($);return}p($)}else p({..._,[t.target.name]:t.target.value})},dataForm:_,handleInputSelect:t=>{console.clear();let r=t.target.name.split("_")[t.target.name.split("_").length-1],s=t.target.name.split("_")[t.target.name.split("_").length-2],l=t.target.name.split("_")[t.target.name.split("_").length-3],n=[],v=0,u=i[s].inputs.length;_[`ev_${s}`]?(n.push(..._[`ev_${s}`]),n[r]=t.target.value,p({..._,[`ev_${s}`]:n})):(p({..._,[`ev_${s}`]:[t.target.value]}),n[r]=t.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{v+=parseInt(e)||0}),s>0){u=0;for(let e=0;e<=s;e++)u+=i[e].inputs.length}if(_.sum_ev_0&&s==1){console.warn("Exist"),v+=_.sum_ev_0;let e={..._};console.log(u*4),e={...e,[`ev_${s}`]:n,[`ev_${l}`]:t.target.value,[`sum_ev_${s}`]:v,[`res_ev_${s}`]:Math.round(v*100/(u*4))},p(e);return}let m={..._};if(m={...m,[`ev_${s}`]:n,[`ev_${l}`]:t.target.value,[`sum_ev_${s}`]:v,[`res_ev_${s}`]:Math.round(v*100/(u*4))},s==0){let e=i.length;for(let o=1;o<e;o++)u+=i[o].inputs.length,console.log(v),m={...m,[`ev_${l}`]:t.target.value,[`sum_ev_${o}`]:v,[`res_ev_${o}`]:Math.round(v*100/(u*4))};p(m);return}p(m)}})};export{A as default};
