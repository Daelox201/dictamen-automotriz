import{r as f,M as E,a as F,F as A}from"./index-39e09190.js";import{C as S}from"./ContainerForm-777b056e.js";const M=[{routeSection:"sistemasMotor",nameSection:"Sistema Alternos de Motor",nameForm:"Sistema de Admision de Aire",nextSection:"Sistema de Emision de Gases",prevSection:"Sistema de Carga y Arranque",nextRoute:"sistemaEmisionGases",prevRoute:"sistemaCargaArranque"}],u=[{name:"",inputs:[{label:"Multiple de Admision",nameElement:"mutipleAdmision",section:"1"},{label:"Filtro de Aire",nameElement:"filtroAire",section:"1"},{label:"Habitaculo Filtro",nameElement:"habitaculoFiltro",section:"1"},{label:"Tapa Filtros de Aire",nameElement:"tapaFiltrosAire",section:"1"},{label:"Mangueras y Ductos",nameElement:"manguerasDuctos",section:"1"},{label:"Fugas",nameElement:"fugas",section:"1"},{label:"Soportes",nameElement:"soportes",section:"1"},{label:"Sujeciones",nameElement:"sujeciones",section:"1"}]},{name:"Section 2",inputs:[{label:"Sensores TPS, MAF, MAP, IAT",nameElement:"sensores",section:"2"},{label:"Cableado y Conectores",nameElement:"cableadosConectores",section:"2"},{label:"Conexiones E&E",nameElement:"conexionesEE",section:"2"}]}],j=()=>{const[_,c]=f.useState({select_mutipleAdmision:"",select_filtroAire:"",select_habitaculoFiltro:"",select_manguerasDuctos:"",select_fugas:"",select_soportes:"",select_sujeciones:"",select_cableadosConectores:"",select_conexionesEE:"",ev_filtroAire:0,ev_habitaculoFiltro:0,ev_tapaFiltrosAire:0,ev_manguerasDuctos:0,ev_fugas:0,ev_soportes:0,ev_sujeciones:0,ev_cableadosConectores:0,ev_conexionesEE:0,observaciones_mutipleAdmision:"",observaciones_filtroAire:"",observaciones_habitaculoFiltro:"",observaciones_tapaFiltrosAire:"",observaciones_manguerasDuctos:"",observaciones_fugas:"",observaciones_soportes:"",observaciones_sujeciones:"",observaciones_sensores:"",observaciones_cableadosConectores:"",observaciones_conexionesEE:""}),[h,b]=f.useState({}),{dataDictamen:d}=f.useContext(E);return f.useEffect(()=>{d&&d.sistemas_motor&&d.sistemas_motor.sistema_admision_aire&&c({..._,...d.sistemas_motor.sistema_admision_aire})},[]),F(S,{data:M,inputs:u,handleForm:a=>{a.preventDefault();const s=A.getInstance();s.setData(_),s.guardarSistemaAdmisionAire()},dataForm:_,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let n,o;if(a.target.localName!="ion-input"){let r=h[a.target.name],p=a.target.name.split("_")[1];if(!a.target.value){if(n=r.split("_")[1],o=r.split("_")[2],s=u[o].inputs.length,o>0){s=0;for(let m=0;m<=o;m++)s+=u[m].inputs.length}let t={..._};if(t={...t,[r]:t[r]-1||0,[`select_${p}`]:"",[`res_${n}_${o}`]:parseInt((t[r]-1||0)*100/s)},o==0){let m=u.length;for(let v=1;v<m;v++)s+=u[v].inputs.length,t={...t,[`sum_${n}_${v}`]:t[r]||0,[`res_${n}_${v}`]:Math.round((t[r]||0)*100/s)};c(t);return}c(t);return}let l=a.target.value.split("-")[0],$=a.target.value.split("-")[1],e=l.split("_")[1],i=$.split("_")[1];if(o=l.split("_")[2],s=u[o].inputs.length,b({...h,[a.target.name]:l}),_[r]>0){if(n=r.split("_")[1],o>0){s=0;for(let m=0;m<=o;m++)s+=u[m].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&n==e){t={...t,[`sum_${e}_${o}`]:t[l]+1||1,[$]:a.target.value,[`au_${i}`]:0,[`or_${i}`]:0,[`rt_${i}`]:0,[`rc_${i}`]:0,[`${e}_${i}`]:1,[`res_${e}_${o}`]:Math.round((t[l]+1||1)*100/s)},c(t);return}t={...t,[l]:t[l]+1||1,[r]:t[r]-1||0,[$]:a.target.value,[`au_${i}`]:0,[`or_${i}`]:0,[`rt_${i}`]:0,[`rc_${i}`]:0,[`${e}_${i}`]:1,[`res_${e}_${o}`]:Math.round((t[l]+1||1)*100/s),[`res_${n}_${o}`]:Math.round((t[r]-1||0)*100/s)},c(t);return}if(o>0){s=0;for(let t=0;t<=o;t++)s+=u[t].inputs.length}let g={..._};if(g={...g,[`sum_${e}_${o}`]:g[l]+1||1,[$]:a.target.value,[`au_${i}`]:0,[`or_${i}`]:0,[`rt_${i}`]:0,[`rc_${i}`]:0,[`${e}_${i}`]:1,[`res_${e}_${o}`]:Math.round((g[l]+1||1)*100/s)},o==0){let t=u.length;console.log(s);for(let m=1;m<t;m++)s+=u[m].inputs.length,g={...g,[`sum_${e}_${m}`]:g[[`sum_${e}_${m}`]]+1||1,[`res_${e}_${m}`]:Math.round((g[[`sum_${e}_${m}`]]+1||1)*100/s)};c(g);return}c(g)}else c({..._,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],n=a.target.name.split("_")[a.target.name.split("_").length-2],o=a.target.name.split("_")[a.target.name.split("_").length-3],r=[],p=0,l=u[n].inputs.length;_[`ev_${n}`]?(r.push(..._[`ev_${n}`]),r[s]=a.target.value,c({..._,[`ev_${n}`]:r})):(c({..._,[`ev_${n}`]:[a.target.value]}),r[s]=a.target.value);for(let e=0;e<r.length;e++)r[e]||(r[e]="0");if(r.map(e=>{p+=parseInt(e)||0}),n>0){l=0;for(let e=0;e<=n;e++)l+=u[e].inputs.length}if(_.sum_ev_0&&n==1){console.warn("Exist"),p+=_.sum_ev_0;let e={..._};console.log(l*4),e={...e,[`ev_${n}`]:r,[`ev_${o}`]:a.target.value,[`sum_ev_${n}`]:p,[`res_ev_${n}`]:Math.round(p*100/(l*4))},c(e);return}let $={..._};if($={...$,[`ev_${n}`]:r,[`ev_${o}`]:a.target.value,[`sum_ev_${n}`]:p,[`res_ev_${n}`]:Math.round(p*100/(l*4))},n==0){let e=u.length;for(let i=1;i<e;i++)l+=u[i].inputs.length,console.log(p),$={...$,[`ev_${o}`]:a.target.value,[`sum_ev_${i}`]:p,[`res_ev_${i}`]:Math.round(p*100/(l*4))};c($);return}c($)}})};export{j as default};
