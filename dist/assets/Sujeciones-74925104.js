import{r as d,M as F,a as M,F as D}from"./index-39e09190.js";import{C as E}from"./ContainerForm-777b056e.js";const y=[{routeSection:"generalesMotor",nameSection:"Generales Motor",nameForm:"Sujeciones",nextSection:"",prevSection:"Tapas y Depositos",nextRoute:"",prevRoute:"tapasDepositos"}],c=[{name:"",inputs:[{label:"Tornillos",nameElement:"tonillos"},{label:"Tuercas",nameElement:"tuerca"},{label:"Arandelas",nameElement:"arandelas"},{label:"Pernos",nameElement:"pernos"},{label:"Chavetas",nameElement:"chavetas"},{label:"Grapas",nameElement:"grapas"},{label:"Otros",nameElement:"otros"}]}],Q=()=>{const[i,m]=d.useState({select_tonillos:"",select_tuerca:"",select_arandelas:"",select_pernos:"",select_chavetas:"",select_grapas:"",select_otros:"",au_tonillos:0,or_tonillos:0,rt_tonillos:0,rc_tonillos:0,ev_tonillos:0,observaciones_tonillos:"",au_tuerca:0,or_tuerca:0,rt_tuerca:0,rc_tuerca:0,ev_tuerca:0,observaciones_tuerca:"",au_arandelas:0,or_arandelas:0,rt_arandelas:0,rc_arandelas:0,ev_arandelas:0,observaciones_arandelas:"",au_pernos:0,or_pernos:0,rt_pernos:0,rc_pernos:0,ev_pernos:0,observaciones_pernos:"",au_chavetas:0,or_chavetas:0,rt_chavetas:0,rc_chavetas:0,ev_chavetas:0,observaciones_chavetas:"",au_grapas:0,or_grapas:0,rt_grapas:0,rc_grapas:0,ev_grapas:0,observaciones_grapas:0,au_otros:0,or_otros:0,rt_otros:0,rc_otros:0,ev_otros:0,observaciones_otros:""}),[f,b]=d.useState({}),{dataDictamen:h}=d.useContext(F);return d.useEffect(()=>{h&&h.generales_motor&&h.generales_motor.motores_sujeciones&&m({...i,...h.generales_motor.motores_sujeciones})},[]),M(E,{data:y,handleForm:a=>{a.preventDefault();const r=D.getInstance();r.setData(i),r.guardarMotorSujeciones()},inputs:c,dataForm:i,handleInput:a=>{let r;if(a.target.localName=="ion-select")return;let s,n;if(a.target.localName!="ion-input"){let o=f[a.target.name],p=a.target.name.split("_")[1];if(!a.target.value){if(s=o.split("_")[1],n=o.split("_")[2],r=c[n].inputs.length,n>0){r=0;for(let u=0;u<=n;u++)r+=c[u].inputs.length}let t={...i};if(t={...t,[o]:t[o]-1||0,[`select_${p}`]:"",[`res_${s}_${n}`]:parseInt((t[o]-1||0)*100/r)},n==0){let u=c.length;for(let g=1;g<u;g++)r+=c[g].inputs.length,t={...t,[`sum_${s}_${g}`]:t[o]||0,[`res_${s}_${g}`]:Math.round((t[o]||0)*100/r)};m(t);return}m(t);return}let _=a.target.value.split("-")[0],$=a.target.value.split("-")[1],e=_.split("_")[1],l=$.split("_")[1];if(n=_.split("_")[2],r=c[n].inputs.length,b({...f,[a.target.name]:_}),i[o]>0){if(s=o.split("_")[1],n>0){r=0;for(let u=0;u<=n;u++)r+=c[u].inputs.length}let t={...i};if(i[`sum_${e}_0`]&&s==e){t={...t,[`sum_${e}_${n}`]:t[_]+1||1,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[_]+1||1)*100/r)},m(t);return}t={...t,[_]:t[_]+1||1,[o]:t[o]-1||0,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[_]+1||1)*100/r),[`res_${s}_${n}`]:Math.round((t[o]-1||0)*100/r)},m(t);return}if(n>0){r=0;for(let t=0;t<=n;t++)r+=c[t].inputs.length}let v={...i};if(v={...v,[`sum_${e}_${n}`]:v[_]+1||1,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((v[_]+1||1)*100/r)},n==0){let t=c.length;console.log(r);for(let u=1;u<t;u++)r+=c[u].inputs.length,v={...v,[`sum_${e}_${u}`]:v[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((v[[`sum_${e}_${u}`]]+1||1)*100/r)};m(v);return}m(v)}else m({...i,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let r=a.target.name.split("_")[a.target.name.split("_").length-1],s=a.target.name.split("_")[a.target.name.split("_").length-2],n=a.target.name.split("_")[a.target.name.split("_").length-3],o=[],p=0,_=c[s].inputs.length;i[`ev_${s}`]?(o.push(...i[`ev_${s}`]),o[r]=a.target.value,m({...i,[`ev_${s}`]:o})):(m({...i,[`ev_${s}`]:[a.target.value]}),o[r]=a.target.value);for(let e=0;e<o.length;e++)o[e]||(o[e]="0");if(o.map(e=>{p+=parseInt(e)||0}),s>0){_=0;for(let e=0;e<=s;e++)_+=c[e].inputs.length}if(i.sum_ev_0&&s==1){console.warn("Exist"),p+=i.sum_ev_0;let e={...i};console.log(_*4),e={...e,[`ev_${s}`]:o,[`ev_${n}`]:a.target.value,[`sum_ev_${s}`]:p,[`res_ev_${s}`]:Math.round(p*100/(_*4))},m(e);return}let $={...i};if($={...$,[`ev_${s}`]:o,[`ev_${n}`]:a.target.value,[`sum_ev_${s}`]:p,[`res_ev_${s}`]:Math.round(p*100/(_*4))},s==0){let e=c.length;for(let l=1;l<e;l++)_+=c[l].inputs.length,console.log(p),$={...$,[`ev_${n}`]:a.target.value,[`sum_ev_${l}`]:p,[`res_ev_${l}`]:Math.round(p*100/(_*4))};m($);return}m($)}})};export{Q as default};
