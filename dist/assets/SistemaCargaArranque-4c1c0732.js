import{r as b,M as f,a as C,F as x}from"./index-39e09190.js";import{C as A}from"./ContainerForm-777b056e.js";const S=[{routeSection:"sistemasMotor",nameSection:"Sistemas Alternos de Motor",nameForm:"Sistema de Carga y Arranque",nextSection:"Sistema de Admision de Aire",prevSection:"",nextRoute:"sistemaAdmisionAire",prevRoute:""}],u=[{name:"",inputs:[{label:"Bateria",nameElement:"bateria"},{label:"Alternador",nameElement:"alternador"},{label:"ProtecciÃ³n de Circuitos",nameElement:"proteccionCircuitos"},{label:"Cableado y Conectores",nameElement:"cableadosConectores"},{label:"Conexiones E & E",nameElement:"conexionesEE"},{label:"Motor de Arranque",nameElement:"motorArranque"},{label:"Modulos",nameElement:"modulos"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"}]}],j=()=>{const[_,m]=b.useState({select_bateria:"",select_alternador:"",select_proteccionCircuitos:"",select_cableadosConectores:"",select_conexionesEE:"",select_motorArranque:"",select_modulos:"",select_soportes:"",select_sujeciones:"",au_bateria:0,or_bateria:0,rt_bateria:0,rc_bateria:0,ev_bateria:0,observaciones_bateria:"",au_alternador:0,or_alternador:0,rt_alternador:0,rc_alternador:0,ev_alternador:0,observaciones_alternador:"",au_proteccionCircuitos:0,or_proteccionCircuitos:0,rt_proteccionCircuitos:0,rc_proteccionCircuitos:0,ev_proteccionCircuitos:0,observaciones_proteccionCircuitos:"",au_cableadosConectores:0,or_cableadosConectores:0,rt_cableadosConectores:0,rc_cableadosConectores:0,ev_cableadosConectores:0,observaciones_cableadosConectores:"",au_conexionesEE:0,or_conexionesEE:0,rt_conexionesEE:0,rc_conexionesEE:0,ev_conexionesEE:0,observaciones_conexionesEE:"",au_motorArranque:0,or_motorArranque:0,rt_motorArranque:0,rc_motorArranque:0,ev_motorArranque:0,observaciones_motorArranque:"",au_modulos:0,or_modulos:0,rt_modulos:0,rc_modulos:0,ev_modulos:0,observaciones_modulos:"",au_soportes:0,or_soportes:0,rt_soportes:0,rc_soportes:0,ev_soportes:0,observaciones_soportes:"",au_sujeciones:0,or_sujeciones:0,rt_sujeciones:0,rc_sujeciones:0,ev_sujeciones:0,observaciones_sujeciones:""}),[E,h]=b.useState({}),{dataDictamen:g}=b.useContext(f);return b.useEffect(()=>{g&&g.sistemas_motor&&g.sistemas_motor.sistema_carga_arranque&&m({..._,...g.sistemas_motor.sistema_carga_arranque})},[]),C(A,{data:S,handleForm:o=>{o.preventDefault();const a=x.getInstance();a.setData(_),a.guardarSistemaCargaArranque()},inputs:u,dataForm:_,handleInput:o=>{let a;if(o.target.localName=="ion-select")return;let r,s;if(o.target.localName!="ion-input"){let n=E[o.target.name],p=o.target.name.split("_")[1];if(!o.target.value){if(r=n.split("_")[1],s=n.split("_")[2],a=u[s].inputs.length,s>0){a=0;for(let c=0;c<=s;c++)a+=u[c].inputs.length}let t={..._};if(t={...t,[n]:t[n]-1||0,[`select_${p}`]:"",[`res_${r}_${s}`]:parseInt((t[n]-1||0)*100/a)},s==0){let c=u.length;for(let v=1;v<c;v++)a+=u[v].inputs.length,t={...t,[`sum_${r}_${v}`]:t[n]||0,[`res_${r}_${v}`]:Math.round((t[n]||0)*100/a)};m(t);return}m(t);return}let i=o.target.value.split("-")[0],d=o.target.value.split("-")[1],e=i.split("_")[1],l=d.split("_")[1];if(s=i.split("_")[2],a=u[s].inputs.length,h({...E,[o.target.name]:i}),_[n]>0){if(r=n.split("_")[1],s>0){a=0;for(let c=0;c<=s;c++)a+=u[c].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&r==e){t={...t,[`sum_${e}_${s}`]:t[i]+1||1,[d]:o.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${s}`]:Math.round((t[i]+1||1)*100/a)},m(t);return}t={...t,[i]:t[i]+1||1,[n]:t[n]-1||0,[d]:o.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${s}`]:Math.round((t[i]+1||1)*100/a),[`res_${r}_${s}`]:Math.round((t[n]-1||0)*100/a)},m(t);return}if(s>0){a=0;for(let t=0;t<=s;t++)a+=u[t].inputs.length}let $={..._};if($={...$,[`sum_${e}_${s}`]:$[i]+1||1,[d]:o.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${s}`]:Math.round(($[i]+1||1)*100/a)},s==0){let t=u.length;console.log(a);for(let c=1;c<t;c++)a+=u[c].inputs.length,$={...$,[`sum_${e}_${c}`]:$[[`sum_${e}_${c}`]]+1||1,[`res_${e}_${c}`]:Math.round(($[[`sum_${e}_${c}`]]+1||1)*100/a)};m($);return}m($)}else m({..._,[o.target.name]:o.target.value})},handleInputSelect:o=>{console.clear();let a=o.target.name.split("_")[o.target.name.split("_").length-1],r=o.target.name.split("_")[o.target.name.split("_").length-2],s=o.target.name.split("_")[o.target.name.split("_").length-3],n=[],p=0,i=u[r].inputs.length;_[`ev_${r}`]?(n.push(..._[`ev_${r}`]),n[a]=o.target.value,m({..._,[`ev_${r}`]:n})):(m({..._,[`ev_${r}`]:[o.target.value]}),n[a]=o.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{p+=parseInt(e)||0}),r>0){i=0;for(let e=0;e<=r;e++)i+=u[e].inputs.length}if(_.sum_ev_0&&r==1){console.warn("Exist"),p+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${r}`]:n,[`ev_${s}`]:o.target.value,[`sum_ev_${r}`]:p,[`res_ev_${r}`]:Math.round(p*100/(i*4))},m(e);return}let d={..._};if(d={...d,[`ev_${r}`]:n,[`ev_${s}`]:o.target.value,[`sum_ev_${r}`]:p,[`res_ev_${r}`]:Math.round(p*100/(i*4))},r==0){let e=u.length;for(let l=1;l<e;l++)i+=u[l].inputs.length,console.log(p),d={...d,[`ev_${s}`]:o.target.value,[`sum_ev_${l}`]:p,[`res_ev_${l}`]:Math.round(p*100/(i*4))};m(d);return}m(d)}})};export{j as default};
