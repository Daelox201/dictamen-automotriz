import{r as d,M as j,a as D,F}from"./index-39e09190.js";import{C as E}from"./ContainerForm-777b056e.js";const z=[{routeSection:"carroceria",nameSection:"CarrocerÃ­a",nameForm:"Lienzos y Partes de Colision",nextSection:"Cristales y Ventanas",prevSection:"Pintura",nextRoute:"cristalesVentanas",prevRoute:"pintura"}],u=[{name:"",inputs:[{label:"Salpicaderas",nameElement:"salpicaderas"},{label:"Linzos Fijos",nameElement:"linzosFijos"},{label:"Defensas",nameElement:"defensas"},{label:"Estribos",nameElement:"estribos"},{label:"Soportes Defensas",nameElement:"soportesDefensas"},{label:"Sujeciones",nameElement:"sujeciones"},{label:"Puertas",nameElement:"puertas"},{label:"Capo",nameElement:"capo"},{label:"Cajuela",nameElement:"cajuela"},{label:"Articulaciones o Bisagras",nameElement:"articulacionesBisagras"}]}],M=()=>{const[_,p]=d.useState({select_salpicaderas:"",select_lienzosFIjos:"",select_Defensas:"",select_estribos:"",select_soportesDefensas:"",select_sujeciones:"",select_puertas:"",select_capo:"",select_cajuela:"",select_articulacionesBisagras:"",au_salpicaderas:"0",or_salpicaderas:"0",rt_salpicaderas:"0",rc_salpicaderas:"0",ev_salpicaderas:"0",observaciones_salpicaderas:"",au_lienzosFIjos:"0",or_lienzosFIjos:"0",rt_lienzosFIjos:"0",rc_lienzosFIjos:"0",ev_lienzosFIjos:"0",observaciones_lienzosFijos:"",au_Defensas:"0",or_Defensas:"0",rt_Defensas:"0",rc_Defensas:"0",ev_Defensas:"0",observaciones_Defensas:"",au_estribos:"0",or_estribos:"0",rt_estribos:"0",rc_estribos:"0",ev_estribos:"0",observaciones_estribos:"",au_soportesDefensas:"0",or_soportesDefensas:"0",rt_soportesDefensas:"0",rc_soportesDefensas:"0",ev_soportesDefensas:"0",observaciones_soportesDefensas:" ",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:" ",au_puertas:"0",or_puertas:"0",rt_puertas:"0",rc_puertas:"0",ev_puertas:"0",observaciones_puertas:" ",au_capo:"0",or_capo:"0",rt_capo:"0",rc_capo:"0",ev_capo:"0",observaciones_capo:" ",au_cajuela:"0",or_cajuela:"0",rt_cajuela:"0",rc_cajuela:"0",ev_cajuela:"0",observaciones_cajuela:" ",au_articulacionesBisagras:"0",or_articulacionesBisagras:"0",rt_articulacionesBisagras:"0",rc_articulacionesBisagras:"0",ev_articulacionesBisagras:"0",observaciones_articulacionesBisagras:" "}),[h,b]=d.useState({}),{dataDictamen:f}=d.useContext(j);return d.useEffect(()=>{f&&f.carroceria&&f.carroceria.carroceria_lienzos_partes_colision&&p({..._,...f.carroceria.carroceria_lienzos_partes_colision})},[]),D(E,{handleForm:t=>{t.preventDefault();const s=F.getInstance();s.setData(_),s.guardarCarroceriaLienzosColision()},data:z,inputs:u,handleInput:t=>{let s;if(t.target.localName=="ion-select")return;let r,n;if(t.target.localName!="ion-input"){let o=h[t.target.name],m=t.target.name.split("_")[1];if(!t.target.value){if(r=o.split("_")[1],n=o.split("_")[2],s=u[n].inputs.length,n>0){s=0;for(let c=0;c<=n;c++)s+=u[c].inputs.length}let a={..._};if(a={...a,[o]:a[o]-1||0,[`select_${m}`]:"",[`res_${r}_${n}`]:parseInt((a[o]-1||0)*100/s)},n==0){let c=u.length;for(let g=1;g<c;g++)s+=u[g].inputs.length,a={...a,[`sum_${r}_${g}`]:a[o]||0,[`res_${r}_${g}`]:Math.round((a[o]||0)*100/s)};p(a);return}p(a);return}let i=t.target.value.split("-")[0],$=t.target.value.split("-")[1],e=i.split("_")[1],l=$.split("_")[1];if(n=i.split("_")[2],s=u[n].inputs.length,b({...h,[t.target.name]:i}),_[o]>0){if(r=o.split("_")[1],n>0){s=0;for(let c=0;c<=n;c++)s+=u[c].inputs.length}let a={..._};if(_[`sum_${e}_0`]&&r==e){a={...a,[`sum_${e}_${n}`]:a[i]+1||1,[$]:t.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((a[i]+1||1)*100/s)},p(a);return}a={...a,[i]:a[i]+1||1,[o]:a[o]-1||0,[$]:t.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((a[i]+1||1)*100/s),[`res_${r}_${n}`]:Math.round((a[o]-1||0)*100/s)},p(a);return}if(n>0){s=0;for(let a=0;a<=n;a++)s+=u[a].inputs.length}let v={..._};if(v={...v,[`sum_${e}_${n}`]:v[i]+1||1,[$]:t.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((v[i]+1||1)*100/s)},n==0){let a=u.length;console.log(s);for(let c=1;c<a;c++)s+=u[c].inputs.length,v={...v,[`sum_${e}_${c}`]:v[[`sum_${e}_${c}`]]+1||1,[`res_${e}_${c}`]:Math.round((v[[`sum_${e}_${c}`]]+1||1)*100/s)};p(v);return}p(v)}else p({..._,[t.target.name]:t.target.value})},dataForm:_,handleInputSelect:t=>{console.clear();let s=t.target.name.split("_")[t.target.name.split("_").length-1],r=t.target.name.split("_")[t.target.name.split("_").length-2],n=t.target.name.split("_")[t.target.name.split("_").length-3],o=[],m=0,i=u[r].inputs.length;_[`ev_${r}`]?(o.push(..._[`ev_${r}`]),o[s]=t.target.value,p({..._,[`ev_${r}`]:o})):(p({..._,[`ev_${r}`]:[t.target.value]}),o[s]=t.target.value);for(let e=0;e<o.length;e++)o[e]||(o[e]="0");if(o.map(e=>{m+=parseInt(e)||0}),r>0){i=0;for(let e=0;e<=r;e++)i+=u[e].inputs.length}if(_.sum_ev_0&&r==1){console.warn("Exist"),m+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${r}`]:o,[`ev_${n}`]:t.target.value,[`sum_ev_${r}`]:m,[`res_ev_${r}`]:Math.round(m*100/(i*4))},p(e);return}let $={..._};if($={...$,[`ev_${r}`]:o,[`ev_${n}`]:t.target.value,[`sum_ev_${r}`]:m,[`res_ev_${r}`]:Math.round(m*100/(i*4))},r==0){let e=u.length;for(let l=1;l<e;l++)i+=u[l].inputs.length,console.log(m),$={...$,[`ev_${n}`]:t.target.value,[`sum_ev_${l}`]:m,[`res_ev_${l}`]:Math.round(m*100/(i*4))};p($);return}p($)}})};export{M as default};
