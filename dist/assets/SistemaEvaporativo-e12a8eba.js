import{r as f,M as b,a as D,F as x}from"./index-39e09190.js";import{C}from"./ContainerForm-777b056e.js";const F=[{routeSection:"sistemasMotor",nameSection:"Sistemas Alternos de Motor",nameForm:"Sistema Evaporativo",nextSection:"",prevSection:"Sistema de InyecciÃ³n de Combustible",nextRoute:"",prevRoute:"sistemaInyeccionCombustible"}],c=[{name:"",inputs:[{label:"Valvula de Purga",nameElement:"valvulaPurga"},{label:"Canister",nameElement:"canister"},{label:"Mangueras y Ducto",nameElement:"manguerasDuctos"},{label:"Cableados y Conectores",nameElement:"cableadosConectores"},{label:"ConexionesEE",nameElement:"conexionesEE"},{label:"Fugas",nameElement:"fugas"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"}]}],I=()=>{const[_,m]=f.useState({select_valvulaPurga:"",select_canister:"",select_mangueraDuctos:"",select_cableadosConectores:"",select_conexionesEE:"",select_fugas:"",select_soportes:"",select_sujeciones:"",au_valvulaPurga:0,or_valvulaPurga:0,rt_valvulaPurga:0,rc_valvulaPurga:0,ev_valvulaPurga:0,observaciones_valvulaPurga:"",au_canister:0,or_canister:0,rt_canister:0,rc_canister:0,ev_canister:0,observaciones_canister:"",au_manguerasDuctos:0,or_manguerasDuctos:0,rt_manguerasDuctos:0,rc_manguerasDuctos:0,ev_manguerasDuctos:0,observaciones_manguerasDuctos:"",au_cableadosConectores:0,or_cableadosConectores:0,rt_cableadosConectores:0,rc_cableadosConectores:0,ev_cableadosConectores:0,observaciones_cableadosConectores:"",au_conexionesEE:0,or_conexionesEE:0,rt_conexionesEE:0,rc_conexionesEE:0,ev_conexionesEE:0,observaciones_conexionesEE:"",au_fugas:0,or_fugas:0,rt_fugas:0,rc_fugas:0,ev_fugas:0,observaciones_fugas:"",au_soportes:0,or_soportes:0,rt_soportes:0,rc_soportes:0,ev_soportes:0,observaciones_soportes:"",au_sujeciones:0,or_sujeciones:0,rt_sujeciones:0,rc_sujeciones:0,ev_sujeciones:0,observaciones_sujeciones:""}),[E,h]=f.useState({}),{dataDictamen:d}=f.useContext(b);return f.useEffect(()=>{d&&d.sistemas_motor&&d.sistemas_motor.sistema_evaporativo&&m({..._,...d.sistemas_motor.sistema_evaporativo})},[]),D(C,{data:F,handleForm:a=>{a.preventDefault();const s=x.getInstance();s.setData(_),s.guardarSistemaEvaporativo()},inputs:c,dataForm:_,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let o,n;if(a.target.localName!="ion-input"){let r=E[a.target.name],v=a.target.name.split("_")[1];if(!a.target.value){if(o=r.split("_")[1],n=r.split("_")[2],s=c[n].inputs.length,n>0){s=0;for(let i=0;i<=n;i++)s+=c[i].inputs.length}let t={..._};if(t={...t,[r]:t[r]-1||0,[`select_${v}`]:"",[`res_${o}_${n}`]:parseInt((t[r]-1||0)*100/s)},n==0){let i=c.length;for(let $=1;$<i;$++)s+=c[$].inputs.length,t={...t,[`sum_${o}_${$}`]:t[r]||0,[`res_${o}_${$}`]:Math.round((t[r]||0)*100/s)};m(t);return}m(t);return}let u=a.target.value.split("-")[0],g=a.target.value.split("-")[1],e=u.split("_")[1],l=g.split("_")[1];if(n=u.split("_")[2],s=c[n].inputs.length,h({...E,[a.target.name]:u}),_[r]>0){if(o=r.split("_")[1],n>0){s=0;for(let i=0;i<=n;i++)s+=c[i].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&o==e){t={...t,[`sum_${e}_${n}`]:t[u]+1||1,[g]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[u]+1||1)*100/s)},m(t);return}t={...t,[u]:t[u]+1||1,[r]:t[r]-1||0,[g]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[u]+1||1)*100/s),[`res_${o}_${n}`]:Math.round((t[r]-1||0)*100/s)},m(t);return}if(n>0){s=0;for(let t=0;t<=n;t++)s+=c[t].inputs.length}let p={..._};if(p={...p,[`sum_${e}_${n}`]:p[u]+1||1,[g]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((p[u]+1||1)*100/s)},n==0){let t=c.length;console.log(s);for(let i=1;i<t;i++)s+=c[i].inputs.length,p={...p,[`sum_${e}_${i}`]:p[[`sum_${e}_${i}`]]+1||1,[`res_${e}_${i}`]:Math.round((p[[`sum_${e}_${i}`]]+1||1)*100/s)};m(p);return}m(p)}else m({..._,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],o=a.target.name.split("_")[a.target.name.split("_").length-2],n=a.target.name.split("_")[a.target.name.split("_").length-3],r=[],v=0,u=c[o].inputs.length;_[`ev_${o}`]?(r.push(..._[`ev_${o}`]),r[s]=a.target.value,m({..._,[`ev_${o}`]:r})):(m({..._,[`ev_${o}`]:[a.target.value]}),r[s]=a.target.value);for(let e=0;e<r.length;e++)r[e]||(r[e]="0");if(r.map(e=>{v+=parseInt(e)||0}),o>0){u=0;for(let e=0;e<=o;e++)u+=c[e].inputs.length}if(_.sum_ev_0&&o==1){console.warn("Exist"),v+=_.sum_ev_0;let e={..._};console.log(u*4),e={...e,[`ev_${o}`]:r,[`ev_${n}`]:a.target.value,[`sum_ev_${o}`]:v,[`res_ev_${o}`]:Math.round(v*100/(u*4))},m(e);return}let g={..._};if(g={...g,[`ev_${o}`]:r,[`ev_${n}`]:a.target.value,[`sum_ev_${o}`]:v,[`res_ev_${o}`]:Math.round(v*100/(u*4))},o==0){let e=c.length;for(let l=1;l<e;l++)u+=c[l].inputs.length,console.log(v),g={...g,[`ev_${n}`]:a.target.value,[`sum_ev_${l}`]:v,[`res_ev_${l}`]:Math.round(v*100/(u*4))};m(g);return}m(g)}})};export{I as default};
