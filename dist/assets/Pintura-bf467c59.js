import{r as h,M as x,a as F,F as y}from"./index-39e09190.js";import{C as z}from"./ContainerForm-777b056e.js";const D=[{routeSection:"carroceria",nameSection:"Carrocería",nameForm:"Pintura",nextSection:"Lienzos y Partes de Colision",prevSection:"",nextRoute:"lienzosPartesColision",prevRoute:""}],c=[{name:"",inputs:[{label:"Color",nameElement:"color"},{label:"Estado (Aplicación)",nameElement:"estado"},{label:"Tonalidad de Lienzos",nameElement:"tonalidadLienzos"},{label:"Interior y Exterior",nameElement:"interiorExterior"}]}],I=()=>{const[_,m]=h.useState({select_color:"",select_estado:"",select_tonalidadLienzos:"",select_interiorExterior:"",au_color:"0",or_color:"0",rt_color:"0",rc_color:"0",ev_color:"0",observaciones_color:"",au_estado:"0",or_estado:"0",rt_estado:"0",rc_estado:"0",ev_estado:"0",observaciones_estado:"",au_tonalidadLienzos:"0",or_tonalidadLienzos:"0",rt_tonalidadLienzos:"0",rc_tonalidadLienzos:"0",ev_tonalidadLienzos:"0",observaciones_tonalidadLienzos:"",au_interiorExterior:"0",or_interiorExterior:"0",rt_interiorExterior:"0",rc_interiorExterior:"0",ev_interiorExterior:"0",observaciones_interiorExterior:""}),[f,E]=h.useState({}),{dataDictamen:v}=h.useContext(x);return h.useEffect(()=>{v&&v.carroceria&&v.carroceria.carroceria_pintura&&m({..._,...v.carroceria.carroceria_pintura})},[]),F(z,{handleForm:r=>{r.preventDefault();const a=y.getInstance();a.setData(_),a.guardarCarroceriaPintura()},data:D,inputs:c,handleInput:r=>{let a;if(r.target.localName=="ion-select")return;let n,o;if(r.target.localName!="ion-input"){let i=f[r.target.name],$=r.target.name.split("_")[1];if(!r.target.value){if(n=i.split("_")[1],o=i.split("_")[2],a=c[o].inputs.length,o>0){a=0;for(let u=0;u<=o;u++)a+=c[u].inputs.length}let t={..._};if(t={...t,[i]:t[i]-1||0,[`select_${$}`]:"",[`res_${n}_${o}`]:parseInt((t[i]-1||0)*100/a)},o==0){let u=c.length;for(let g=1;g<u;g++)a+=c[g].inputs.length,t={...t,[`sum_${n}_${g}`]:t[i]||0,[`res_${n}_${g}`]:Math.round((t[i]||0)*100/a)};m(t);return}m(t);return}let s=r.target.value.split("-")[0],d=r.target.value.split("-")[1],e=s.split("_")[1],l=d.split("_")[1];if(o=s.split("_")[2],a=c[o].inputs.length,E({...f,[r.target.name]:s}),_[i]>0){if(n=i.split("_")[1],o>0){a=0;for(let u=0;u<=o;u++)a+=c[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&n==e){t={...t,[`sum_${e}_${o}`]:t[s]+1||1,[d]:r.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${o}`]:Math.round((t[s]+1||1)*100/a)},m(t);return}t={...t,[s]:t[s]+1||1,[i]:t[i]-1||0,[d]:r.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${o}`]:Math.round((t[s]+1||1)*100/a),[`res_${n}_${o}`]:Math.round((t[i]-1||0)*100/a)},m(t);return}if(o>0){a=0;for(let t=0;t<=o;t++)a+=c[t].inputs.length}let p={..._};if(p={...p,[`sum_${e}_${o}`]:p[s]+1||1,[d]:r.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${o}`]:Math.round((p[s]+1||1)*100/a)},o==0){let t=c.length;console.log(a);for(let u=1;u<t;u++)a+=c[u].inputs.length,p={...p,[`sum_${e}_${u}`]:p[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((p[[`sum_${e}_${u}`]]+1||1)*100/a)};m(p);return}m(p)}else m({..._,[r.target.name]:r.target.value})},dataForm:_,handleInputSelect:r=>{console.clear();let a=r.target.name.split("_")[r.target.name.split("_").length-1],n=r.target.name.split("_")[r.target.name.split("_").length-2],o=r.target.name.split("_")[r.target.name.split("_").length-3],i=[],$=0,s=c[n].inputs.length;_[`ev_${n}`]?(i.push(..._[`ev_${n}`]),i[a]=r.target.value,m({..._,[`ev_${n}`]:i})):(m({..._,[`ev_${n}`]:[r.target.value]}),i[a]=r.target.value);for(let e=0;e<i.length;e++)i[e]||(i[e]="0");if(i.map(e=>{$+=parseInt(e)||0}),n>0){s=0;for(let e=0;e<=n;e++)s+=c[e].inputs.length}if(_.sum_ev_0&&n==1){console.warn("Exist"),$+=_.sum_ev_0;let e={..._};console.log(s*4),e={...e,[`ev_${n}`]:i,[`ev_${o}`]:r.target.value,[`sum_ev_${n}`]:$,[`res_ev_${n}`]:Math.round($*100/(s*4))},m(e);return}let d={..._};if(d={...d,[`ev_${n}`]:i,[`ev_${o}`]:r.target.value,[`sum_ev_${n}`]:$,[`res_ev_${n}`]:Math.round($*100/(s*4))},n==0){let e=c.length;for(let l=1;l<e;l++)s+=c[l].inputs.length,console.log($),d={...d,[`ev_${o}`]:r.target.value,[`sum_ev_${l}`]:$,[`res_ev_${l}`]:Math.round($*100/(s*4))};m(d);return}m(d)}})};export{I as default};
