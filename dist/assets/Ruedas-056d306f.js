import{r as h,M as F,a as E,F as j}from"./index-39e09190.js";import{C as y}from"./ContainerForm-777b056e.js";const D=[{routeSection:"carroceria",nameSection:"CarrocerÃ­a",nameForm:"Ruedas",nextSection:"Accesorios",prevSection:"Cerrajerias y Enclaves",nextRoute:"accesorios",prevRoute:"cerrajeriasEnclaves"}],c=[{name:"",inputs:[{label:"Rines",nameElement:"rines"},{label:"Neumaticos",nameElement:"neumaticos"},{label:"Tapones",nameElement:"tapones"},{label:"Birlos",nameElement:"birlos"},{label:"Seguros",nameElement:"seguros"},{label:"Sujeciones",nameElement:"sujeciones"}]}],I=()=>{const[_,m]=h.useState({select_rines:"",select_neumaticos:"",select_tapones:"",select_birlos:"",select_seguros:"",select_sujeciones:"",au_rines:"0",or_rines:"0",rt_rines:"0",rc_rines:"0",ev_rines:"0",observaciones_rines:" ",au_neumaticos:"0",or_neumaticos:"0",rt_neumaticos:"0",rc_neumaticos:"0",ev_neumaticos:"0",observaciones_neumaticos:" ",au_tapones:"0",or_tapones:"0",rt_tapones:"0",rc_tapones:"0",ev_tapones:"0",observaciones_tapones:" ",au_birlos:"0",or_birlos:"0",rt_birlos:"0",rc_birlos:"0",ev_birlos:"0",observaciones_birlos:" ",au_seguros:"0",or_seguros:"0",rt_seguros:"0",rc_seguros:"0",ev_seguros:"0",observaciones_seguros:" ",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:" "}),[f,b]=h.useState({}),{dataDictamen:d}=h.useContext(F);return h.useEffect(()=>{d&&d.carroceria&&d.carroceria.carroceria_ruedas&&m({..._,...d.carroceria.carroceria_ruedas})},[]),E(y,{handleForm:a=>{a.preventDefault();const r=j.getInstance();r.setData(_),r.guardarCarroceriaRuedas()},data:D,inputs:c,handleInput:a=>{let r;if(a.target.localName=="ion-select")return;let s,n;if(a.target.localName!="ion-input"){let o=f[a.target.name],p=a.target.name.split("_")[1];if(!a.target.value){if(s=o.split("_")[1],n=o.split("_")[2],r=c[n].inputs.length,n>0){r=0;for(let u=0;u<=n;u++)r+=c[u].inputs.length}let t={..._};if(t={...t,[o]:t[o]-1||0,[`select_${p}`]:"",[`res_${s}_${n}`]:parseInt((t[o]-1||0)*100/r)},n==0){let u=c.length;for(let v=1;v<u;v++)r+=c[v].inputs.length,t={...t,[`sum_${s}_${v}`]:t[o]||0,[`res_${s}_${v}`]:Math.round((t[o]||0)*100/r)};m(t);return}m(t);return}let i=a.target.value.split("-")[0],$=a.target.value.split("-")[1],e=i.split("_")[1],l=$.split("_")[1];if(n=i.split("_")[2],r=c[n].inputs.length,b({...f,[a.target.name]:i}),_[o]>0){if(s=o.split("_")[1],n>0){r=0;for(let u=0;u<=n;u++)r+=c[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&s==e){t={...t,[`sum_${e}_${n}`]:t[i]+1||1,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/r)},m(t);return}t={...t,[i]:t[i]+1||1,[o]:t[o]-1||0,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/r),[`res_${s}_${n}`]:Math.round((t[o]-1||0)*100/r)},m(t);return}if(n>0){r=0;for(let t=0;t<=n;t++)r+=c[t].inputs.length}let g={..._};if(g={...g,[`sum_${e}_${n}`]:g[i]+1||1,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((g[i]+1||1)*100/r)},n==0){let t=c.length;console.log(r);for(let u=1;u<t;u++)r+=c[u].inputs.length,g={...g,[`sum_${e}_${u}`]:g[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((g[[`sum_${e}_${u}`]]+1||1)*100/r)};m(g);return}m(g)}else m({..._,[a.target.name]:a.target.value})},dataForm:_,handleInputSelect:a=>{console.clear();let r=a.target.name.split("_")[a.target.name.split("_").length-1],s=a.target.name.split("_")[a.target.name.split("_").length-2],n=a.target.name.split("_")[a.target.name.split("_").length-3],o=[],p=0,i=c[s].inputs.length;_[`ev_${s}`]?(o.push(..._[`ev_${s}`]),o[r]=a.target.value,m({..._,[`ev_${s}`]:o})):(m({..._,[`ev_${s}`]:[a.target.value]}),o[r]=a.target.value);for(let e=0;e<o.length;e++)o[e]||(o[e]="0");if(o.map(e=>{p+=parseInt(e)||0}),s>0){i=0;for(let e=0;e<=s;e++)i+=c[e].inputs.length}if(_.sum_ev_0&&s==1){console.warn("Exist"),p+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${s}`]:o,[`ev_${n}`]:a.target.value,[`sum_ev_${s}`]:p,[`res_ev_${s}`]:Math.round(p*100/(i*4))},m(e);return}let $={..._};if($={...$,[`ev_${s}`]:o,[`ev_${n}`]:a.target.value,[`sum_ev_${s}`]:p,[`res_ev_${s}`]:Math.round(p*100/(i*4))},s==0){let e=c.length;for(let l=1;l<e;l++)i+=c[l].inputs.length,console.log(p),$={...$,[`ev_${n}`]:a.target.value,[`sum_ev_${l}`]:p,[`res_ev_${l}`]:Math.round(p*100/(i*4))};m($);return}m($)}})};export{I as default};
