import{r as g,M as j,a as C,F}from"./index-39e09190.js";import{C as I}from"./ContainerForm-777b056e.js";const E=[{routeSection:"carroceria",nameSection:"CarrocerÃ­a",nameForm:"Luces",nextSection:"",prevSection:"Molduras",nextRoute:"",prevRoute:"molduras"}],u=[{name:"",inputs:[{label:"Luces Principales",nameElement:"lucesPrincipales"},{label:"Luces Intermitentes",nameElement:"lucesIntermitentes"},{label:"Direccionales",nameElement:"direccionales"},{label:"Freno",nameElement:"freno"},{label:"Estado Unidades",nameElement:"estadoUnidades"},{label:"Sujeciones",nameElement:"sujeciones"},{label:"Cableados y Conectores",nameElement:"cableadosConectores"},{label:"Reflejantes",nameElement:"reflejantes"}]}],S=()=>{const[i,m]=g.useState({select_lucesPrincipales:"",select_lucesIntermitentes:"",select_direccionales:"",select_freno:"",select_estadoUnidades:"",select_sujeciones:"",select_cableadosConectores:"",select_reflejantes:"",au_lucesPrincipales:"0",or_lucesPrincipales:"0",rt_lucesPrincipales:"0",rc_lucesPrincipales:"0",ev_lucesPrincipales:"0",observaciones_lucesPrincipales:" ",au_lucesIntermitentes:"0",or_lucesIntermitentes:"0",rt_lucesIntermitentes:"0",rc_lucesIntermitentes:"0",ev_lucesIntermitentes:"0",observaciones_lucesIntermitentes:" ",au_direccionales:"0",or_direccionales:"0",rt_direccionales:"0",rc_direccionales:"0",ev_direccionales:"0",observaciones_direccionales:" ",au_freno:"0",or_freno:"0",rt_freno:"0",rc_freno:"0",ev_freno:"0",observaciones_freno:" ",au_estadoUnidades:"0",or_estadoUnidades:"0",rt_estadoUnidades:"0",rc_estadoUnidades:"0",ev_estadoUnidades:"0",observaciones_estadoUnidades:" ",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:" ",au_cableadosConectores:"0",or_cableadosConectores:"0",rt_cableadosConectores:"0",rc_cableadosConectores:"0",ev_cableadosConectores:"0",observaciones_cableadosConectores:" ",au_reflejantes:"0",or_reflejantes:"0",rt_reflejantes:"0",rc_reflejantes:"0",ev_reflejantes:"0",observaciones_reflejantes:" "}),[h,b]=g.useState({}),{dataDictamen:f}=g.useContext(j);return g.useEffect(()=>{f&&f.carroceria&&f.carroceria.carroceria_luces&&m({...i,...f.carroceria.carroceria_luces})},[]),C(I,{handleForm:a=>{a.preventDefault();const s=F.getInstance();s.setData(i),s.guardarCarroceriaLuces()},data:E,inputs:u,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let n,r;if(a.target.localName!="ion-input"){let l=h[a.target.name],d=a.target.name.split("_")[1];if(!a.target.value){if(n=l.split("_")[1],r=l.split("_")[2],s=u[r].inputs.length,r>0){s=0;for(let _=0;_<=r;_++)s+=u[_].inputs.length}let t={...i};if(t={...t,[l]:t[l]-1||0,[`select_${d}`]:"",[`res_${n}_${r}`]:parseInt((t[l]-1||0)*100/s)},r==0){let _=u.length;for(let v=1;v<_;v++)s+=u[v].inputs.length,t={...t,[`sum_${n}_${v}`]:t[l]||0,[`res_${n}_${v}`]:Math.round((t[l]||0)*100/s)};m(t);return}m(t);return}let c=a.target.value.split("-")[0],p=a.target.value.split("-")[1],e=c.split("_")[1],o=p.split("_")[1];if(r=c.split("_")[2],s=u[r].inputs.length,b({...h,[a.target.name]:c}),i[l]>0){if(n=l.split("_")[1],r>0){s=0;for(let _=0;_<=r;_++)s+=u[_].inputs.length}let t={...i};if(i[`sum_${e}_0`]&&n==e){t={...t,[`sum_${e}_${r}`]:t[c]+1||1,[p]:a.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${r}`]:Math.round((t[c]+1||1)*100/s)},m(t);return}t={...t,[c]:t[c]+1||1,[l]:t[l]-1||0,[p]:a.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${r}`]:Math.round((t[c]+1||1)*100/s),[`res_${n}_${r}`]:Math.round((t[l]-1||0)*100/s)},m(t);return}if(r>0){s=0;for(let t=0;t<=r;t++)s+=u[t].inputs.length}let $={...i};if($={...$,[`sum_${e}_${r}`]:$[c]+1||1,[p]:a.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${r}`]:Math.round(($[c]+1||1)*100/s)},r==0){let t=u.length;console.log(s);for(let _=1;_<t;_++)s+=u[_].inputs.length,$={...$,[`sum_${e}_${_}`]:$[[`sum_${e}_${_}`]]+1||1,[`res_${e}_${_}`]:Math.round(($[[`sum_${e}_${_}`]]+1||1)*100/s)};m($);return}m($)}else m({...i,[a.target.name]:a.target.value})},dataForm:i,handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],n=a.target.name.split("_")[a.target.name.split("_").length-2],r=a.target.name.split("_")[a.target.name.split("_").length-3],l=[],d=0,c=u[n].inputs.length;i[`ev_${n}`]?(l.push(...i[`ev_${n}`]),l[s]=a.target.value,m({...i,[`ev_${n}`]:l})):(m({...i,[`ev_${n}`]:[a.target.value]}),l[s]=a.target.value);for(let e=0;e<l.length;e++)l[e]||(l[e]="0");if(l.map(e=>{d+=parseInt(e)||0}),n>0){c=0;for(let e=0;e<=n;e++)c+=u[e].inputs.length}if(i.sum_ev_0&&n==1){console.warn("Exist"),d+=i.sum_ev_0;let e={...i};console.log(c*4),e={...e,[`ev_${n}`]:l,[`ev_${r}`]:a.target.value,[`sum_ev_${n}`]:d,[`res_ev_${n}`]:Math.round(d*100/(c*4))},m(e);return}let p={...i};if(p={...p,[`ev_${n}`]:l,[`ev_${r}`]:a.target.value,[`sum_ev_${n}`]:d,[`res_ev_${n}`]:Math.round(d*100/(c*4))},n==0){let e=u.length;for(let o=1;o<e;o++)c+=u[o].inputs.length,console.log(d),p={...p,[`ev_${r}`]:a.target.value,[`sum_ev_${o}`]:d,[`res_ev_${o}`]:Math.round(d*100/(c*4))};m(p);return}m(p)}})};export{S as default};
