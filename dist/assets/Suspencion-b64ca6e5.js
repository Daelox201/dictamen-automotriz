import{r as d,M as E,a as j,F as x}from"./index-39e09190.js";import{C as z}from"./ContainerForm-777b056e.js";const F=[{routeSection:"automotrices",nameSection:"Sistemas Automotrices",nameForm:"Suspencion",nextSection:"Chassis",prevSection:"DirecciÃ³n",nextRoute:"chassis",prevRoute:"direccion"}],c=[{name:"",inputs:[{label:"Amortiguadores",nameElement:"amortiguadores"},{label:"Resortes",nameElement:"resortes"},{label:"Bases",nameElement:"bases"},{label:"Brazos",nameElement:"brazos"},{label:"Rotulas",nameElement:"rotulas"},{label:"Fijaciones Brazos",nameElement:"fijacionesBrazos"},{label:"Horquillas",nameElement:"horquillas"},{label:"Cableados y Conectores",nameElement:"cableadosConectores"},{label:"Conexiones E&E",nameElement:"conexionesEE"},{label:"Fugas",nameElement:"fugas"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"},{label:"Otros",nameElement:"otros"}]}],M=()=>{const[i,m]=d.useState({select_amortiguadores:"",select_resortes:"",select_bases:"",select_brazos:"",select_rotulas:"",select_fijacionesBrazos:"",select_horquillas:"",select_cableadosConectores:"",select_conexionesEE:"",select_fugas:"",select_soportes:"",select_sujeciones:"",select_otros:"",au_amortiguadores:"0",or_amortiguadores:"0",rt_amortiguadores:"0",rc_amortiguadores:"0",ev_amortiguadores:"0",observaciones_amortiguadores:"",au_resortes:"0",or_resortes:"0",rt_resortes:"0",rc_resortes:"0",ev_resortes:"0",observaciones_resortes:"",au_bases:"0",or_bases:"0",rt_bases:"0",rc_bases:"0",ev_bases:"0",observaciones_bases:"",au_brazos:"0",or_brazos:"0",rt_brazos:"0",rc_brazos:"0",ev_brazos:"0",observaciones_brazos:"",au_rotulas:"0",or_rotulas:"0",rt_rotulas:"0",rc_rotulas:"0",ev_rotulas:"0",observaciones_rotulas:"",au_fijacionesBrazos:"0",or_fijacionesBrazos:"0",rt_fijacionesBrazos:"0",rc_fijacionesBrazos:"0",ev_fijacionesBrazos:"0",observaciones_fijacionesBrazos:"",au_horquillas:"0",or_horquillas:"0",rt_horquillas:"0",rc_horquillas:"0",ev_horquillas:"0",observaciones_horquillas:"",au_cableadosConectores:"0",or_cableadosConectores:"0",rt_cableadosConectores:"0",rc_cableadosConectores:"0",ev_cableadosConectores:"0",observaciones_cableadosConectores:"",au_conexionesEE:"0",or_conexionesEE:"0",rt_conexionesEE:"0",rc_conexionesEE:"0",ev_conexionesEE:"0",observaciones_conexionesEE:"",au_fugas:"0",or_fugas:"0",rt_fugas:"0",rc_fugas:"0",ev_fugas:"0",observaciones_fugas:"",au_soportes:"0",or_soportes:"0",rt_soportes:"0",rc_soportes:"0",ev_soportes:"0",observaciones_soportes:"",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:"",au_otros:"0",or_otros:"0",rt_otros:"0",rc_otros:"0",ev_otros:"0",observaciones_otros:""}),[f,h]=d.useState({}),{dataDictamen:b}=d.useContext(E);return d.useEffect(()=>{b&&b.automotrices&&b.automotrices.sitemas_automotrices_suspension&&m({...i,...b.automotrices.sitemas_automotrices_suspension})},[]),j(z,{handleForm:s=>{s.preventDefault();const o=x.getInstance();o.setData(i),o.guardarAutomotricesSuspension()},data:F,inputs:c,handleInput:s=>{let o;if(s.target.localName=="ion-select")return;let a,r;if(s.target.localName!="ion-input"){let n=f[s.target.name],p=s.target.name.split("_")[1];if(!s.target.value){if(a=n.split("_")[1],r=n.split("_")[2],o=c[r].inputs.length,r>0){o=0;for(let u=0;u<=r;u++)o+=c[u].inputs.length}let t={...i};if(t={...t,[n]:t[n]-1||0,[`select_${p}`]:"",[`res_${a}_${r}`]:parseInt((t[n]-1||0)*100/o)},r==0){let u=c.length;for(let $=1;$<u;$++)o+=c[$].inputs.length,t={...t,[`sum_${a}_${$}`]:t[n]||0,[`res_${a}_${$}`]:Math.round((t[n]||0)*100/o)};m(t);return}m(t);return}let _=s.target.value.split("-")[0],g=s.target.value.split("-")[1],e=_.split("_")[1],l=g.split("_")[1];if(r=_.split("_")[2],o=c[r].inputs.length,h({...f,[s.target.name]:_}),i[n]>0){if(a=n.split("_")[1],r>0){o=0;for(let u=0;u<=r;u++)o+=c[u].inputs.length}let t={...i};if(i[`sum_${e}_0`]&&a==e){t={...t,[`sum_${e}_${r}`]:t[_]+1||1,[g]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((t[_]+1||1)*100/o)},m(t);return}t={...t,[_]:t[_]+1||1,[n]:t[n]-1||0,[g]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((t[_]+1||1)*100/o),[`res_${a}_${r}`]:Math.round((t[n]-1||0)*100/o)},m(t);return}if(r>0){o=0;for(let t=0;t<=r;t++)o+=c[t].inputs.length}let v={...i};if(v={...v,[`sum_${e}_${r}`]:v[_]+1||1,[g]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((v[_]+1||1)*100/o)},r==0){let t=c.length;console.log(o);for(let u=1;u<t;u++)o+=c[u].inputs.length,v={...v,[`sum_${e}_${u}`]:v[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((v[[`sum_${e}_${u}`]]+1||1)*100/o)};m(v);return}m(v)}else m({...i,[s.target.name]:s.target.value})},dataForm:i,handleInputSelect:s=>{console.clear();let o=s.target.name.split("_")[s.target.name.split("_").length-1],a=s.target.name.split("_")[s.target.name.split("_").length-2],r=s.target.name.split("_")[s.target.name.split("_").length-3],n=[],p=0,_=c[a].inputs.length;i[`ev_${a}`]?(n.push(...i[`ev_${a}`]),n[o]=s.target.value,m({...i,[`ev_${a}`]:n})):(m({...i,[`ev_${a}`]:[s.target.value]}),n[o]=s.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{p+=parseInt(e)||0}),a>0){_=0;for(let e=0;e<=a;e++)_+=c[e].inputs.length}if(i.sum_ev_0&&a==1){console.warn("Exist"),p+=i.sum_ev_0;let e={...i};console.log(_*4),e={...e,[`ev_${a}`]:n,[`ev_${r}`]:s.target.value,[`sum_ev_${a}`]:p,[`res_ev_${a}`]:Math.round(p*100/(_*4))},m(e);return}let g={...i};if(g={...g,[`ev_${a}`]:n,[`ev_${r}`]:s.target.value,[`sum_ev_${a}`]:p,[`res_ev_${a}`]:Math.round(p*100/(_*4))},a==0){let e=c.length;for(let l=1;l<e;l++)_+=c[l].inputs.length,console.log(p),g={...g,[`ev_${r}`]:s.target.value,[`sum_ev_${l}`]:p,[`res_ev_${l}`]:Math.round(p*100/(_*4))};m(g);return}m(g)}})};export{M as default};
