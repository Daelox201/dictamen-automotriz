import{r as h,M as j,a as E,F}from"./index-39e09190.js";import{C as y}from"./ContainerForm-777b056e.js";const C=[{routeSection:"carroceria",nameSection:"CarrocerÃ­a",nameForm:"Cristales y Ventanas",nextSection:"Cerrajerias y Enclaves",prevSection:"Lienzos y Partes de Colision",nextRoute:"cerrajeriasEnclaves",prevRoute:"lienzosPartesColision"}],c=[{name:"",inputs:[{label:"Luneta",nameElement:"luneta"},{label:"Parabrisas",nameElement:"parabrisas"},{label:"Espejos Laterales",nameElement:"espejosLaterales"},{label:"Quemacocos (Sunroof)",nameElement:"quemacocos"},{label:"Aletillas",nameElement:"aletillas"},{label:"Sujeciones",nameElement:"sujeciones"}]}],q=()=>{const[_,m]=h.useState({select_luneta:"",select_parabrisas:"",select_espejosLaterales:"",select_quemacocos:"",select_aletillas:"",select_sujeciones:"",au_luneta:"0",or_luneta:"0",rt_luneta:"0",rc_luneta:"0",ev_luneta:"0",observaciones_luneta:" ",au_parabrisas:"0",or_parabrisas:"0",rt_parabrisas:"0",rc_parabrisas:"0",ev_parabrisas:"0",observaciones_parabrisas:" ",au_espejosLaterales:"0",or_espejosLaterales:"0",rt_espejosLaterales:"0",rc_espejosLaterales:"0",ev_espejosLaterales:"0",observaciones_espejosLaterales:" ",au_quemacocos:"0",or_quemacocos:"0",rt_quemacocos:"0",rc_quemacocos:"0",ev_quemacocos:"0",observaciones_quemacocos:" ",au_aletillas:"0",or_aletillas:"0",rt_aletillas:"0",rc_aletillas:"0",ev_aletillas:"0",observaciones_aletillas:" ",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:" "}),[d,b]=h.useState({}),{dataDictamen:f}=h.useContext(j);return h.useEffect(()=>{f&&f.carroceria&&f.carroceria.carroceria_cristales_ventanas&&m({..._,...f.carroceria.carroceria_cristales_ventanas})},[]),E(y,{handleForm:a=>{a.preventDefault();const s=F.getInstance();s.setData(_),s.guardarCarroceriaCristalesVentanas()},data:C,inputs:c,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let r,l;if(a.target.localName!="ion-input"){let n=d[a.target.name],p=a.target.name.split("_")[1];if(!a.target.value){if(r=n.split("_")[1],l=n.split("_")[2],s=c[l].inputs.length,l>0){s=0;for(let u=0;u<=l;u++)s+=c[u].inputs.length}let t={..._};if(t={...t,[n]:t[n]-1||0,[`select_${p}`]:"",[`res_${r}_${l}`]:parseInt((t[n]-1||0)*100/s)},l==0){let u=c.length;for(let g=1;g<u;g++)s+=c[g].inputs.length,t={...t,[`sum_${r}_${g}`]:t[n]||0,[`res_${r}_${g}`]:Math.round((t[n]||0)*100/s)};m(t);return}m(t);return}let i=a.target.value.split("-")[0],$=a.target.value.split("-")[1],e=i.split("_")[1],o=$.split("_")[1];if(l=i.split("_")[2],s=c[l].inputs.length,b({...d,[a.target.name]:i}),_[n]>0){if(r=n.split("_")[1],l>0){s=0;for(let u=0;u<=l;u++)s+=c[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&r==e){t={...t,[`sum_${e}_${l}`]:t[i]+1||1,[$]:a.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${l}`]:Math.round((t[i]+1||1)*100/s)},m(t);return}t={...t,[i]:t[i]+1||1,[n]:t[n]-1||0,[$]:a.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${l}`]:Math.round((t[i]+1||1)*100/s),[`res_${r}_${l}`]:Math.round((t[n]-1||0)*100/s)},m(t);return}if(l>0){s=0;for(let t=0;t<=l;t++)s+=c[t].inputs.length}let v={..._};if(v={...v,[`sum_${e}_${l}`]:v[i]+1||1,[$]:a.target.value,[`au_${o}`]:0,[`or_${o}`]:0,[`rt_${o}`]:0,[`rc_${o}`]:0,[`${e}_${o}`]:1,[`res_${e}_${l}`]:Math.round((v[i]+1||1)*100/s)},l==0){let t=c.length;console.log(s);for(let u=1;u<t;u++)s+=c[u].inputs.length,v={...v,[`sum_${e}_${u}`]:v[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((v[[`sum_${e}_${u}`]]+1||1)*100/s)};m(v);return}m(v)}else m({..._,[a.target.name]:a.target.value})},dataForm:_,handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],r=a.target.name.split("_")[a.target.name.split("_").length-2],l=a.target.name.split("_")[a.target.name.split("_").length-3],n=[],p=0,i=c[r].inputs.length;_[`ev_${r}`]?(n.push(..._[`ev_${r}`]),n[s]=a.target.value,m({..._,[`ev_${r}`]:n})):(m({..._,[`ev_${r}`]:[a.target.value]}),n[s]=a.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{p+=parseInt(e)||0}),r>0){i=0;for(let e=0;e<=r;e++)i+=c[e].inputs.length}if(_.sum_ev_0&&r==1){console.warn("Exist"),p+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${r}`]:n,[`ev_${l}`]:a.target.value,[`sum_ev_${r}`]:p,[`res_ev_${r}`]:Math.round(p*100/(i*4))},m(e);return}let $={..._};if($={...$,[`ev_${r}`]:n,[`ev_${l}`]:a.target.value,[`sum_ev_${r}`]:p,[`res_ev_${r}`]:Math.round(p*100/(i*4))},r==0){let e=c.length;for(let o=1;o<e;o++)i+=c[o].inputs.length,console.log(p),$={...$,[`ev_${l}`]:a.target.value,[`sum_ev_${o}`]:p,[`res_ev_${o}`]:Math.round(p*100/(i*4))};m($);return}m($)}})};export{q as default};
