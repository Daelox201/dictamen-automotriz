import{r as b,M as A,a as F,F as D}from"./index-39e09190.js";import{C as M}from"./ContainerForm-777b056e.js";const E=[{routeSection:"generalesMotor",nameSection:"Generales Motor",nameForm:"Tapones",nextSection:"Filtros",prevSection:"Juntas",nextRoute:"filtros",prevRoute:"juntas"}],u=[{name:"",inputs:[{label:"Aceite",nameElement:"aceite"},{label:"Drenado de Aceite",nameElement:"drenadoAceite"},{label:"Combustible",nameElement:"combustible"},{label:"Deposito de Anticongelante",nameElement:"depositoAnticongelante"},{label:"Deposito de Agua Lipiaparabrisas",nameElement:"depositoAguaLimpiaparabrisas"},{label:"DirecciÃ³n Hidraulica",nameElement:"direccionHidraulica"}]}],I=()=>{const[_,p]=b.useState({select_aceite:"",select_drenadoAceite:"",select_combustible:"",select_depositoAnticongelante:"",select_depositoAguaLimpiaparabrisas:"",select_direccionHidraulica:"",au_aceite:0,or_aceite:0,rt_aceite:0,rc_aceite:0,ev_aceite:0,observaciones_aceite:"",au_drenadoAceite:0,or_drenadoAceite:0,rt_drenadoAceite:0,rc_drenadoAceite:0,ev_drenadoAceite:0,observaciones_drenadoAceite:"",au_combustible:0,or_combustible:0,rt_combustible:0,rc_combustible:0,ev_combustible:0,observaciones_combustible:"",au_depositoAnticongelante:0,or_depositoAnticongelante:0,rt_depositoAnticongelante:0,rc_depositoAnticongelante:0,ev_depositoAnticongelante:0,observacobservaciones_depositoAnticongelanteiones:"",au_depositoAguaLimpiaparabrisas:0,or_depositoAguaLimpiaparabrisas:0,rt_depositoAguaLimpiaparabrisas:0,rc_depositoAguaLimpiaparabrisas:0,ev_depositoAguaLimpiaparabrisas:0,observaciones_depositoAguaLimpiaparabrisas:"",au_direccionHidraulica:0,or_direccionHidraulica:0,rt_direccionHidraulica:0,rc_direccionHidraulica:0,ev_direccionHidraulica:0,observaciones_direccionHidraulica:""}),[f,h]=b.useState({}),{dataDictamen:v}=b.useContext(A);return b.useEffect(()=>{v&&v.generales_motor&&v.generales_motor.motores_tapones&&p({..._,...v.generales_motor.motores_tapones})},[]),F(M,{data:E,handleForm:a=>{a.preventDefault();const i=D.getInstance();i.setData(_),i.guardarMotorTapones()},inputs:u,dataForm:_,handleInput:a=>{let i;if(a.target.localName=="ion-select")return;let n,r;if(a.target.localName!="ion-input"){let o=f[a.target.name],m=a.target.name.split("_")[1];if(!a.target.value){if(n=o.split("_")[1],r=o.split("_")[2],i=u[r].inputs.length,r>0){i=0;for(let c=0;c<=r;c++)i+=u[c].inputs.length}let t={..._};if(t={...t,[o]:t[o]-1||0,[`select_${m}`]:"",[`res_${n}_${r}`]:parseInt((t[o]-1||0)*100/i)},r==0){let c=u.length;for(let $=1;$<c;$++)i+=u[$].inputs.length,t={...t,[`sum_${n}_${$}`]:t[o]||0,[`res_${n}_${$}`]:Math.round((t[o]||0)*100/i)};p(t);return}p(t);return}let l=a.target.value.split("-")[0],d=a.target.value.split("-")[1],e=l.split("_")[1],s=d.split("_")[1];if(r=l.split("_")[2],i=u[r].inputs.length,h({...f,[a.target.name]:l}),_[o]>0){if(n=o.split("_")[1],r>0){i=0;for(let c=0;c<=r;c++)i+=u[c].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&n==e){t={...t,[`sum_${e}_${r}`]:t[l]+1||1,[d]:a.target.value,[`au_${s}`]:0,[`or_${s}`]:0,[`rt_${s}`]:0,[`rc_${s}`]:0,[`${e}_${s}`]:1,[`res_${e}_${r}`]:Math.round((t[l]+1||1)*100/i)},p(t);return}t={...t,[l]:t[l]+1||1,[o]:t[o]-1||0,[d]:a.target.value,[`au_${s}`]:0,[`or_${s}`]:0,[`rt_${s}`]:0,[`rc_${s}`]:0,[`${e}_${s}`]:1,[`res_${e}_${r}`]:Math.round((t[l]+1||1)*100/i),[`res_${n}_${r}`]:Math.round((t[o]-1||0)*100/i)},p(t);return}if(r>0){i=0;for(let t=0;t<=r;t++)i+=u[t].inputs.length}let g={..._};if(g={...g,[`sum_${e}_${r}`]:g[l]+1||1,[d]:a.target.value,[`au_${s}`]:0,[`or_${s}`]:0,[`rt_${s}`]:0,[`rc_${s}`]:0,[`${e}_${s}`]:1,[`res_${e}_${r}`]:Math.round((g[l]+1||1)*100/i)},r==0){let t=u.length;console.log(i);for(let c=1;c<t;c++)i+=u[c].inputs.length,g={...g,[`sum_${e}_${c}`]:g[[`sum_${e}_${c}`]]+1||1,[`res_${e}_${c}`]:Math.round((g[[`sum_${e}_${c}`]]+1||1)*100/i)};p(g);return}p(g)}else p({..._,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let i=a.target.name.split("_")[a.target.name.split("_").length-1],n=a.target.name.split("_")[a.target.name.split("_").length-2],r=a.target.name.split("_")[a.target.name.split("_").length-3],o=[],m=0,l=u[n].inputs.length;_[`ev_${n}`]?(o.push(..._[`ev_${n}`]),o[i]=a.target.value,p({..._,[`ev_${n}`]:o})):(p({..._,[`ev_${n}`]:[a.target.value]}),o[i]=a.target.value);for(let e=0;e<o.length;e++)o[e]||(o[e]="0");if(o.map(e=>{m+=parseInt(e)||0}),n>0){l=0;for(let e=0;e<=n;e++)l+=u[e].inputs.length}if(_.sum_ev_0&&n==1){console.warn("Exist"),m+=_.sum_ev_0;let e={..._};console.log(l*4),e={...e,[`ev_${n}`]:o,[`ev_${r}`]:a.target.value,[`sum_ev_${n}`]:m,[`res_ev_${n}`]:Math.round(m*100/(l*4))},p(e);return}let d={..._};if(d={...d,[`ev_${n}`]:o,[`ev_${r}`]:a.target.value,[`sum_ev_${n}`]:m,[`res_ev_${n}`]:Math.round(m*100/(l*4))},n==0){let e=u.length;for(let s=1;s<e;s++)l+=u[s].inputs.length,console.log(m),d={...d,[`ev_${r}`]:a.target.value,[`sum_ev_${s}`]:m,[`res_ev_${s}`]:Math.round(m*100/(l*4))};p(d);return}p(d)}})};export{I as default};
