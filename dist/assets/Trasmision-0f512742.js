import{r as d,M as E,a as C,F as j}from"./index-39e09190.js";import{C as x}from"./ContainerForm-777b056e.js";const F=[{routeSection:"automotrices",nameSection:"Sistemas Automotrices",nameForm:"TramisiÃ³n",nextSection:"",prevSection:"Frenos",nextRoute:"",prevRoute:"frenos"}],u=[{name:"",inputs:[{label:"Cajas",nameElement:"cajas"},{label:"Diferenciales",nameElement:"diferenciales"},{label:"Flechas",nameElement:"flechas"},{label:"Crucetas",nameElement:"crucetas"},{label:"Cardanes",nameElement:"cardanes"},{label:"Acomplamientos (Tricetas, Cuatricetas)",nameElement:"acomplamientosTC"},{label:"Cubrepolvos",nameElement:"cubrepolvos"},{label:"Fugas",nameElement:"fugas"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"},{label:"Otros",nameElement:"otros"}]},{name:"",inputs:[{label:"Sensores VSS, VAS",nameElement:"sensoresVV",section:"Con control Electronico"},{label:"Cableados y Conectores",nameElement:"cableadosConectores"},{label:"Conexiones E&E",nameElement:"conexionesEE"}]}],M=()=>{const[_,m]=d.useState({select_cajas:"",select_diferenciales:"",select_flechas:"",select_crucetas:"",select_cardanes:"",select_acomplamientosTC:"",select_cubrepolvos:"",select_fugas:"",select_soportes:"",select_sujeciones:"",select_otros:"",select_sensoresVV:"",select_cableadosConectores:"",select_conexionesEE:"",au_cajas:"0",or_cajas:"0",rt_cajas:"0",rc_cajas:"0",ev_cajas:"0",observaciones_cajas:"",au_diferenciales:"0",or_diferenciales:"0",rt_diferenciales:"0",rc_diferenciales:"0",ev_diferenciales:"0",observaciones_diferenciales:"",au_flechas:"0",or_flechas:"0",rt_flechas:"0",rc_flechas:"0",ev_flechas:"0",observaciones_flechas:"",au_crucetas:"0",or_crucetas:"0",rt_crucetas:"0",rc_crucetas:"0",ev_crucetas:"0",observaciones_crucetas:"",au_cardanes:"0",or_cardanes:"0",rt_cardanes:"0",rc_cardanes:"0",ev_cardanes:"0",observaciones_cardanes:"",au_acomplamientosTC:"0",or_acomplamientosTC:"0",rt_acomplamientosTC:"0",rc_acomplamientosTC:"0",ev_acomplamientosTC:"0",observaciones_acomplamientosTC:"",au_cubrepolvos:"0",or_cubrepolvos:"0",rt_cubrepolvos:"0",rc_cubrepolvos:"0",ev_cubrepolvos:"0",observaciones_cubrepolvos:"",au_fugas:"0",or_fugas:"0",rt_fugas:"0",rc_fugas:"0",ev_fugas:"0",observaciones_fugas:"",au_soportes:"0",or_soportes:"0",rt_soportes:"0",rc_soportes:"0",ev_soportes:"0",observaciones_soportes:"",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:"",au_otros:"0",or_otros:"0",rt_otros:"0",rc_otros:"0",ev_otros:"0",observaciones_otros:"",au_sensoresVV:"0",or_sensoresVV:"0",rt_sensoresVV:"0",rc_sensoresVV:"0",ev_sensoresVV:"0",observaciones_sensoresVV:"",au_cableadosConectores:"0",or_cableadosConectores:"0",rt_cableadosConectores:"0",rc_cableadosConectores:"0",ev_cableadosConectores:"0",observaciones_cableadosConectores:"",au_conexionesEE:"0",or_conexionesEE:"0",rt_conexionesEE:"0",rc_conexionesEE:"0",ev_conexionesEE:"0",observaciones_conexionesEE:""}),[b,h]=d.useState({}),{dataDictamen:g}=d.useContext(E);return d.useEffect(()=>{g&&g.automotrices&&g.automotrices.sitemas_automotrices_trasmision&&m({..._,...g.automotrices.sitemas_automotrices_trasmision})},[]),C(x,{handleForm:s=>{s.preventDefault();const a=j.getInstance();a.setData(_),a.guardarAutomotricesTrasmision()},data:F,inputs:u,dataForm:_,handleInput:s=>{let a;if(s.target.localName=="ion-select")return;let o,r;if(s.target.localName!="ion-input"){let n=b[s.target.name],p=s.target.name.split("_")[1];if(!s.target.value){if(o=n.split("_")[1],r=n.split("_")[2],a=u[r].inputs.length,r>0){a=0;for(let i=0;i<=r;i++)a+=u[i].inputs.length}let t={..._};if(t={...t,[n]:t[n]-1||0,[`select_${p}`]:"",[`res_${o}_${r}`]:parseInt((t[n]-1||0)*100/a)},r==0){let i=u.length;for(let f=1;f<i;f++)a+=u[f].inputs.length,t={...t,[`sum_${o}_${f}`]:t[n]||0,[`res_${o}_${f}`]:Math.round((t[n]||0)*100/a)};m(t);return}m(t);return}let c=s.target.value.split("-")[0],v=s.target.value.split("-")[1],e=c.split("_")[1],l=v.split("_")[1];if(r=c.split("_")[2],a=u[r].inputs.length,h({...b,[s.target.name]:c}),_[n]>0){if(o=n.split("_")[1],r>0){a=0;for(let i=0;i<=r;i++)a+=u[i].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&o==e){t={...t,[`sum_${e}_${r}`]:t[c]+1||1,[v]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((t[c]+1||1)*100/a)},m(t);return}t={...t,[c]:t[c]+1||1,[n]:t[n]-1||0,[v]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((t[c]+1||1)*100/a),[`res_${o}_${r}`]:Math.round((t[n]-1||0)*100/a)},m(t);return}if(r>0){a=0;for(let t=0;t<=r;t++)a+=u[t].inputs.length}let $={..._};if($={...$,[`sum_${e}_${r}`]:$[c]+1||1,[v]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round(($[c]+1||1)*100/a)},r==0){let t=u.length;console.log(a);for(let i=1;i<t;i++)a+=u[i].inputs.length,$={...$,[`sum_${e}_${i}`]:$[[`sum_${e}_${i}`]]+1||1,[`res_${e}_${i}`]:Math.round(($[[`sum_${e}_${i}`]]+1||1)*100/a)};m($);return}m($)}else m({..._,[s.target.name]:s.target.value})},handleInputSelect:s=>{console.clear();let a=s.target.name.split("_")[s.target.name.split("_").length-1],o=s.target.name.split("_")[s.target.name.split("_").length-2],r=s.target.name.split("_")[s.target.name.split("_").length-3],n=[],p=0,c=u[o].inputs.length;_[`ev_${o}`]?(n.push(..._[`ev_${o}`]),n[a]=s.target.value,m({..._,[`ev_${o}`]:n})):(m({..._,[`ev_${o}`]:[s.target.value]}),n[a]=s.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{p+=parseInt(e)||0}),o>0){c=0;for(let e=0;e<=o;e++)c+=u[e].inputs.length}if(_.sum_ev_0&&o==1){console.warn("Exist"),p+=_.sum_ev_0;let e={..._};console.log(c*4),e={...e,[`ev_${o}`]:n,[`ev_${r}`]:s.target.value,[`sum_ev_${o}`]:p,[`res_ev_${o}`]:Math.round(p*100/(c*4))},m(e);return}let v={..._};if(v={...v,[`ev_${o}`]:n,[`ev_${r}`]:s.target.value,[`sum_ev_${o}`]:p,[`res_ev_${o}`]:Math.round(p*100/(c*4))},o==0){let e=u.length;for(let l=1;l<e;l++)c+=u[l].inputs.length,console.log(p),v={...v,[`ev_${r}`]:s.target.value,[`sum_ev_${l}`]:p,[`res_ev_${l}`]:Math.round(p*100/(c*4))};m(v);return}m(v)}})};export{M as default};
