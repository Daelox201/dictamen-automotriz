import{r as f,M as F,a as y,F as E}from"./index-39e09190.js";import{C as D}from"./ContainerForm-777b056e.js";const I=[{routeSection:"interiores",nameSection:"Interiores",nameForm:"Tapicerias y Alfombrados",nextSection:"",prevSection:"Luces Interiores",nextRoute:"",prevRoute:"lucesInteriores"}],c=[{name:"",inputs:[{label:"Color",nameElement:"color"},{label:"Tipo",nameElement:"tipo"},{label:"Estado",nameElement:"estado"},{label:"Sujeciones",nameElement:"sujeciones"},{label:"Traslapes",nameElement:"traslapes"}]}],Q=()=>{const[_,p]=f.useState({select_color:"",select_tipo:"",select_estado:"",select_sujeciones:"",select_traslapes:"",au_color:"0",or_color:"0",rt_color:"0",rc_color:"0",ev_color:"0",observaciones_color:" ",au_tipo:"0",or_tipo:"0",rt_tipo:"0",rc_tipo:"0",ev_tipo:"0",observaciones_tipo:" ",au_estado:"0",or_estado:"0",rt_estado:"0",rc_estado:"0",ev_estado:"0",observaciones_estado:" ",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:" ",au_traslapes:"0",or_traslapes:"0",rt_traslapes:"0",rc_traslapes:"0",ev_traslapes:"0",observaciones_traslapes:" "}),[h,b]=f.useState({}),{dataDictamen:d}=f.useContext(F);return f.useEffect(()=>{d&&d.interiores&&d.interiores.interiores_tapicerias_alfombrados&&p({..._,...d.interiores.interiores_tapicerias_alfombrados})},[]),y(D,{handleForm:a=>{a.preventDefault();const r=E.getInstance();r.setData(_),r.guardarInterioresTapiceriasAlfombrados()},data:I,inputs:c,handleInput:a=>{let r;if(a.target.localName=="ion-select")return;let s,o;if(a.target.localName!="ion-input"){let n=h[a.target.name],m=a.target.name.split("_")[1];if(!a.target.value){if(s=n.split("_")[1],o=n.split("_")[2],r=c[o].inputs.length,o>0){r=0;for(let u=0;u<=o;u++)r+=c[u].inputs.length}let t={..._};if(t={...t,[n]:t[n]-1||0,[`select_${m}`]:"",[`res_${s}_${o}`]:parseInt((t[n]-1||0)*100/r)},o==0){let u=c.length;for(let v=1;v<u;v++)r+=c[v].inputs.length,t={...t,[`sum_${s}_${v}`]:t[n]||0,[`res_${s}_${v}`]:Math.round((t[n]||0)*100/r)};p(t);return}p(t);return}let i=a.target.value.split("-")[0],$=a.target.value.split("-")[1],e=i.split("_")[1],l=$.split("_")[1];if(o=i.split("_")[2],r=c[o].inputs.length,b({...h,[a.target.name]:i}),_[n]>0){if(s=n.split("_")[1],o>0){r=0;for(let u=0;u<=o;u++)r+=c[u].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&s==e){t={...t,[`sum_${e}_${o}`]:t[i]+1||1,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${o}`]:Math.round((t[i]+1||1)*100/r)},p(t);return}t={...t,[i]:t[i]+1||1,[n]:t[n]-1||0,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${o}`]:Math.round((t[i]+1||1)*100/r),[`res_${s}_${o}`]:Math.round((t[n]-1||0)*100/r)},p(t);return}if(o>0){r=0;for(let t=0;t<=o;t++)r+=c[t].inputs.length}let g={..._};if(g={...g,[`sum_${e}_${o}`]:g[i]+1||1,[$]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${o}`]:Math.round((g[i]+1||1)*100/r)},o==0){let t=c.length;console.log(r);for(let u=1;u<t;u++)r+=c[u].inputs.length,g={...g,[`sum_${e}_${u}`]:g[[`sum_${e}_${u}`]]+1||1,[`res_${e}_${u}`]:Math.round((g[[`sum_${e}_${u}`]]+1||1)*100/r)};p(g);return}p(g)}else p({..._,[a.target.name]:a.target.value})},dataForm:_,handleInputSelect:a=>{console.clear();let r=a.target.name.split("_")[a.target.name.split("_").length-1],s=a.target.name.split("_")[a.target.name.split("_").length-2],o=a.target.name.split("_")[a.target.name.split("_").length-3],n=[],m=0,i=c[s].inputs.length;_[`ev_${s}`]?(n.push(..._[`ev_${s}`]),n[r]=a.target.value,p({..._,[`ev_${s}`]:n})):(p({..._,[`ev_${s}`]:[a.target.value]}),n[r]=a.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{m+=parseInt(e)||0}),s>0){i=0;for(let e=0;e<=s;e++)i+=c[e].inputs.length}if(_.sum_ev_0&&s==1){console.warn("Exist"),m+=_.sum_ev_0;let e={..._};console.log(i*4),e={...e,[`ev_${s}`]:n,[`ev_${o}`]:a.target.value,[`sum_ev_${s}`]:m,[`res_ev_${s}`]:Math.round(m*100/(i*4))},p(e);return}let $={..._};if($={...$,[`ev_${s}`]:n,[`ev_${o}`]:a.target.value,[`sum_ev_${s}`]:m,[`res_ev_${s}`]:Math.round(m*100/(i*4))},s==0){let e=c.length;for(let l=1;l<e;l++)i+=c[l].inputs.length,console.log(m),$={...$,[`ev_${o}`]:a.target.value,[`sum_ev_${l}`]:m,[`res_ev_${l}`]:Math.round(m*100/(i*4))};p($);return}p($)}})};export{Q as default};
