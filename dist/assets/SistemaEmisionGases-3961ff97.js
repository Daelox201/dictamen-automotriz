import{r as g,M as h,a as x,F as C}from"./index-39e09190.js";import{C as j}from"./ContainerForm-777b056e.js";const F=[{routeSection:"sistemasMotor",nameSection:"Sistemas Alternos de Motor",nameForm:"Sistema de Emision de Gases",nextSection:"Sistema de Enfriamento",prevSection:"Sistema de Admisión de Aire",nextRoute:"sistemaEnfriamento",prevRoute:"sistemaAdmisionAire"}],u=[{name:"",inputs:[{label:"Multiple de Escape",nameElement:"multipleEscape"},{label:"Silenciadores",nameElement:"silenciadores"},{label:"Resonadores",nameElement:"resonadores"},{label:"Juntas Flexibles",nameElement:"juntasFlexibles"},{label:"Juntas de Escape",nameElement:"juntasEscape"},{label:"Caño o Tubo de Escape",nameElement:"cañoTuboEscape"},{label:"Fugas",nameElement:"fugas"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"}]},{name:"Con Control Electronico",inputs:[{label:"Convertidor Catalitico",nameElement:"convertidorCatalitico"},{label:"Sensor O2",nameElement:"sensorO2"},{label:"Cableado y Conectores",nameElement:"cableadosConectores"},{label:"Conexiones E&E",nameElement:"conexionEE"}]}],T=()=>{const[c,m]=g.useState({select_multipleEscape:"",select_silenciadores:"",select_resonadores:"",select_juntasFlexibles:"",select_juntasEscape:"",select_cañoTuboEscape:"",select_fugas:"",select_soportes:"",select_sujeciones:"",select_convertidorCatalitico:"",select_sensorO2:"",select_cableadosConectores:"",select_conexionEE:"",au_multipleEscape:0,or_multipleEscape:0,rt_multipleEscape:0,rc_multipleEscape:0,ev_multipleEscape:0,observaciones_multipleEscape:"",au_silenciadores:0,or_silenciadores:0,rt_silenciadores:0,rc_silenciadores:0,ev_silenciadores:0,observaciones_silenciadores:"",au_resonadores:0,or_resonadores:0,rt_resonadores:0,rc_resonadores:0,ev_resonadores:0,observaciones_resonadores:"",au_juntasFlexibles:0,or_juntasFlexibles:0,rt_juntasFlexibles:0,rc_juntasFlexibles:0,ev_juntasFlexibles:0,observaciones_juntasFlexibles:"",au_juntasEscape:0,or_juntasEscape:0,rt_juntasEscape:0,rc_juntasEscape:0,ev_juntasEscape:0,observaciones_juntasEscape:"",au_cañoTuboEscape:0,or_cañoTuboEscape:0,rt_cañoTuboEscape:0,rc_cañoTuboEscape:0,ev_cañoTuboEscape:0,observaciones_cañoTuboEscape:"",au_fugas:0,or_fugas:0,rt_fugas:0,rc_fugas:0,ev_fugas:0,observaciones_fugas:"",au_soportes:0,or_soportes:0,rt_soportes:0,rc_soportes:0,ev_soportes:0,observaciones_soportes:"",au_sujeciones:0,or_sujeciones:0,rt_sujeciones:0,rc_sujeciones:0,ev_sujeciones:0,observaciones_sujeciones:0,au_convertidorCatalitico:0,or_convertidorCatalitico:0,rt_convertidorCatalitico:0,rc_convertidorCatalitico:0,ev_convertidorCatalitico:0,observaciones_convertidorCatalitico:"",au_sensorO2:0,or_sensorO2:0,rt_sensorO2:0,rc_sensorO2:0,ev_sensorO2:0,observaciones_sensorO2:"",au_cableadosConectores:0,or_cableadosConectores:0,rt_cableadosConectores:0,rc_cableadosConectores:0,ev_cableadosConectores:0,observaciones_cableadosConectores:"",au_conexionEE:0,or_conexionEE:0,rt_conexionEE:0,rc_conexionEE:0,ev_conexionEE:0,observaciones_conexionEE:""}),[b,f]=g.useState({}),{dataDictamen:$}=g.useContext(h);return g.useEffect(()=>{$&&$.sistemas_motor&&$.sistemas_motor.sistema_emison_gases&&m({...c,...$.sistemas_motor.sistema_emison_gases})},[]),x(j,{data:F,handleForm:s=>{s.preventDefault();const a=C.getInstance();a.setData(c),a.guardarSistemaEmisionGases()},inputs:u,dataForm:c,handleInput:s=>{let a;if(s.target.localName=="ion-select")return;let o,n;if(s.target.localName!="ion-input"){let r=b[s.target.name],p=s.target.name.split("_")[1];if(!s.target.value){if(o=r.split("_")[1],n=r.split("_")[2],a=u[n].inputs.length,n>0){a=0;for(let _=0;_<=n;_++)a+=u[_].inputs.length}let t={...c};if(t={...t,[r]:t[r]-1||0,[`select_${p}`]:"",[`res_${o}_${n}`]:parseInt((t[r]-1||0)*100/a)},n==0){let _=u.length;for(let E=1;E<_;E++)a+=u[E].inputs.length,t={...t,[`sum_${o}_${E}`]:t[r]||0,[`res_${o}_${E}`]:Math.round((t[r]||0)*100/a)};m(t);return}m(t);return}let i=s.target.value.split("-")[0],d=s.target.value.split("-")[1],e=i.split("_")[1],l=d.split("_")[1];if(n=i.split("_")[2],a=u[n].inputs.length,f({...b,[s.target.name]:i}),c[r]>0){if(o=r.split("_")[1],n>0){a=0;for(let _=0;_<=n;_++)a+=u[_].inputs.length}let t={...c};if(c[`sum_${e}_0`]&&o==e){t={...t,[`sum_${e}_${n}`]:t[i]+1||1,[d]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/a)},m(t);return}t={...t,[i]:t[i]+1||1,[r]:t[r]-1||0,[d]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((t[i]+1||1)*100/a),[`res_${o}_${n}`]:Math.round((t[r]-1||0)*100/a)},m(t);return}if(n>0){a=0;for(let t=0;t<=n;t++)a+=u[t].inputs.length}let v={...c};if(v={...v,[`sum_${e}_${n}`]:v[i]+1||1,[d]:s.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${n}`]:Math.round((v[i]+1||1)*100/a)},n==0){let t=u.length;console.log(a);for(let _=1;_<t;_++)a+=u[_].inputs.length,v={...v,[`sum_${e}_${_}`]:v[[`sum_${e}_${_}`]]+1||1,[`res_${e}_${_}`]:Math.round((v[[`sum_${e}_${_}`]]+1||1)*100/a)};m(v);return}m(v)}else m({...c,[s.target.name]:s.target.value})},handleInputSelect:s=>{console.clear();let a=s.target.name.split("_")[s.target.name.split("_").length-1],o=s.target.name.split("_")[s.target.name.split("_").length-2],n=s.target.name.split("_")[s.target.name.split("_").length-3],r=[],p=0,i=u[o].inputs.length;c[`ev_${o}`]?(r.push(...c[`ev_${o}`]),r[a]=s.target.value,m({...c,[`ev_${o}`]:r})):(m({...c,[`ev_${o}`]:[s.target.value]}),r[a]=s.target.value);for(let e=0;e<r.length;e++)r[e]||(r[e]="0");if(r.map(e=>{p+=parseInt(e)||0}),o>0){i=0;for(let e=0;e<=o;e++)i+=u[e].inputs.length}if(c.sum_ev_0&&o==1){console.warn("Exist"),p+=c.sum_ev_0;let e={...c};console.log(i*4),e={...e,[`ev_${o}`]:r,[`ev_${n}`]:s.target.value,[`sum_ev_${o}`]:p,[`res_ev_${o}`]:Math.round(p*100/(i*4))},m(e);return}let d={...c};if(d={...d,[`ev_${o}`]:r,[`ev_${n}`]:s.target.value,[`sum_ev_${o}`]:p,[`res_ev_${o}`]:Math.round(p*100/(i*4))},o==0){let e=u.length;for(let l=1;l<e;l++)i+=u[l].inputs.length,console.log(p),d={...d,[`ev_${n}`]:s.target.value,[`sum_ev_${l}`]:p,[`res_ev_${l}`]:Math.round(p*100/(i*4))};m(d);return}m(d)}})};export{T as default};
