import{r as d,M as D,a as j,F as x}from"./index-39e09190.js";import{C as E}from"./ContainerForm-777b056e.js";const C=[{routeSection:"automotrices",nameSection:"Sistemas Automotrices",nameForm:"Direccion",nextSection:"Suspensión",prevSection:"",nextRoute:"suspension",prevRoute:""}],u=[{name:"",inputs:[{label:"Bieletas",nameElement:"bieletas"},{label:"Rotulas",nameElement:"rotulas"},{label:"Bomba de Dirección",nameElement:"bombaDirección"},{label:"Cajas",nameElement:"cajas"},{label:"Cableados y Conectores",nameElement:"cableadosConectores"},{label:"Mangueras y Ductos",nameElement:"manguerasDuctos"},{label:"Conexiones H&N",nameElement:"conexionesHN"},{label:"Fugas",nameElement:"fugas"},{label:"Soportes",nameElement:"soportes"},{label:"Sujeciones",nameElement:"sujeciones"},{label:"Otros",nameElement:"otros"}]}],H=()=>{const[_,m]=d.useState({select_bieletas:"",select_rotulas:"",select_bombaDirección:"",select_cajas:"",select_cableadosConectores:"",select_manguerasDuctos:"",select_conexionesHN:"",select_fugas:"",select_soportes:"",select_sujeciones:"",select_otros:"",au_bieletas:"0",or_bieletas:"0",rt_bieletas:"0",rc_bieletas:"0",ev_bieletas:"0",observaciones_bieletas:"",au_rotulas:"0",or_rotulas:"0",rt_rotulas:"0",rc_rotulas:"0",ev_rotulas:"0",observaciones_rotulas:"",au_bombaDirección:"0",or_bombaDirección:"0",rt_bombaDirección:"0",rc_bombaDirección:"0",ev_bombaDirección:"0",observaciones_bombaDirección:"",au_cajas:"0",or_cajas:"0",rt_cajas:"0",rc_cajas:"0",ev_cajas:"0",observaciones_cajas:"",au_cableadosConectores:"0",or_cableadosConectores:"0",rt_cableadosConectores:"0",rc_cableadosConectores:"0",ev_cableadosConectores:"0",observaciones_cableadosConectores:"",au_manguerasDuctos:"0",or_manguerasDuctos:"0",rt_manguerasDuctos:"0",rc_manguerasDuctos:"0",ev_manguerasDuctos:"0",observaciones_manguerasDuctos:"",au_conexionesHN:"0",or_conexionesHN:"0",rt_conexionesHN:"0",rc_conexionesHN:"0",ev_conexionesHN:"0",observaciones_conexionesHN:"",au_fugas:"0",or_fugas:"0",rt_fugas:"0",rc_fugas:"0",ev_fugas:"0",observaciones_fugas:"",au_soportes:"0",or_soportes:"0",rt_soportes:"0",rc_soportes:"0",ev_soportes:"0",observaciones_soportes:"",au_sujeciones:"0",or_sujeciones:"0",rt_sujeciones:"0",rc_sujeciones:"0",ev_sujeciones:"0",observaciones_sujeciones:"",au_otros:"0",or_otros:"0",rt_otros:"0",rc_otros:"0",ev_otros:"0",observaciones_otros:""}),[f,h]=d.useState({}),{dataDictamen:b}=d.useContext(D);return d.useEffect(()=>{b&&b.automotrices&&b.automotrices.sitemas_automotrices_direccion&&m({..._,...b.automotrices.sitemas_automotrices_direccion})},[]),j(E,{data:C,handleForm:a=>{a.preventDefault();const s=x.getInstance();s.setData(_),s.guardarAutomotricesDireccion()},inputs:u,dataForm:_,handleInput:a=>{let s;if(a.target.localName=="ion-select")return;let o,r;if(a.target.localName!="ion-input"){let n=f[a.target.name],g=a.target.name.split("_")[1];if(!a.target.value){if(o=n.split("_")[1],r=n.split("_")[2],s=u[r].inputs.length,r>0){s=0;for(let i=0;i<=r;i++)s+=u[i].inputs.length}let t={..._};if(t={...t,[n]:t[n]-1||0,[`select_${g}`]:"",[`res_${o}_${r}`]:parseInt((t[n]-1||0)*100/s)},r==0){let i=u.length;for(let v=1;v<i;v++)s+=u[v].inputs.length,t={...t,[`sum_${o}_${v}`]:t[n]||0,[`res_${o}_${v}`]:Math.round((t[n]||0)*100/s)};m(t);return}m(t);return}let c=a.target.value.split("-")[0],p=a.target.value.split("-")[1],e=c.split("_")[1],l=p.split("_")[1];if(r=c.split("_")[2],s=u[r].inputs.length,h({...f,[a.target.name]:c}),_[n]>0){if(o=n.split("_")[1],r>0){s=0;for(let i=0;i<=r;i++)s+=u[i].inputs.length}let t={..._};if(_[`sum_${e}_0`]&&o==e){t={...t,[`sum_${e}_${r}`]:t[c]+1||1,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((t[c]+1||1)*100/s)},m(t);return}t={...t,[c]:t[c]+1||1,[n]:t[n]-1||0,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round((t[c]+1||1)*100/s),[`res_${o}_${r}`]:Math.round((t[n]-1||0)*100/s)},m(t);return}if(r>0){s=0;for(let t=0;t<=r;t++)s+=u[t].inputs.length}let $={..._};if($={...$,[`sum_${e}_${r}`]:$[c]+1||1,[p]:a.target.value,[`au_${l}`]:0,[`or_${l}`]:0,[`rt_${l}`]:0,[`rc_${l}`]:0,[`${e}_${l}`]:1,[`res_${e}_${r}`]:Math.round(($[c]+1||1)*100/s)},r==0){let t=u.length;console.log(s);for(let i=1;i<t;i++)s+=u[i].inputs.length,$={...$,[`sum_${e}_${i}`]:$[[`sum_${e}_${i}`]]+1||1,[`res_${e}_${i}`]:Math.round(($[[`sum_${e}_${i}`]]+1||1)*100/s)};m($);return}m($)}else m({..._,[a.target.name]:a.target.value})},handleInputSelect:a=>{console.clear();let s=a.target.name.split("_")[a.target.name.split("_").length-1],o=a.target.name.split("_")[a.target.name.split("_").length-2],r=a.target.name.split("_")[a.target.name.split("_").length-3],n=[],g=0,c=u[o].inputs.length;_[`ev_${o}`]?(n.push(..._[`ev_${o}`]),n[s]=a.target.value,m({..._,[`ev_${o}`]:n})):(m({..._,[`ev_${o}`]:[a.target.value]}),n[s]=a.target.value);for(let e=0;e<n.length;e++)n[e]||(n[e]="0");if(n.map(e=>{g+=parseInt(e)||0}),o>0){c=0;for(let e=0;e<=o;e++)c+=u[e].inputs.length}if(_.sum_ev_0&&o==1){console.warn("Exist"),g+=_.sum_ev_0;let e={..._};console.log(c*4),e={...e,[`ev_${o}`]:n,[`ev_${r}`]:a.target.value,[`sum_ev_${o}`]:g,[`res_ev_${o}`]:Math.round(g*100/(c*4))},m(e);return}let p={..._};if(p={...p,[`ev_${o}`]:n,[`ev_${r}`]:a.target.value,[`sum_ev_${o}`]:g,[`res_ev_${o}`]:Math.round(g*100/(c*4))},o==0){let e=u.length;for(let l=1;l<e;l++)c+=u[l].inputs.length,console.log(g),p={...p,[`ev_${r}`]:a.target.value,[`sum_ev_${l}`]:g,[`res_ev_${l}`]:Math.round(g*100/(c*4))};m(p);return}m(p)}})};export{H as default};
